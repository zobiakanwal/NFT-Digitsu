{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.deserializeMint = exports.deserializeAccount = void 0;\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar spl_token_1 = require(\"@solana/spl-token\"); // TODO: expose in spl package\n\n\nvar deserializeAccount = function deserializeAccount(data) {\n  var accountInfo = spl_token_1.AccountLayout.decode(data);\n  accountInfo.mint = new web3_js_1.PublicKey(accountInfo.mint);\n  accountInfo.owner = new web3_js_1.PublicKey(accountInfo.owner);\n  accountInfo.amount = spl_token_1.u64.fromBuffer(accountInfo.amount);\n\n  if (accountInfo.delegateOption === 0) {\n    accountInfo.delegate = null;\n    accountInfo.delegatedAmount = new spl_token_1.u64(0);\n  } else {\n    accountInfo.delegate = new web3_js_1.PublicKey(accountInfo.delegate);\n    accountInfo.delegatedAmount = spl_token_1.u64.fromBuffer(accountInfo.delegatedAmount);\n  }\n\n  accountInfo.isInitialized = accountInfo.state !== 0;\n  accountInfo.isFrozen = accountInfo.state === 2;\n\n  if (accountInfo.isNativeOption === 1) {\n    accountInfo.rentExemptReserve = spl_token_1.u64.fromBuffer(accountInfo.isNative);\n    accountInfo.isNative = true;\n  } else {\n    accountInfo.rentExemptReserve = null;\n    accountInfo.isNative = false;\n  }\n\n  if (accountInfo.closeAuthorityOption === 0) {\n    accountInfo.closeAuthority = null;\n  } else {\n    accountInfo.closeAuthority = new web3_js_1.PublicKey(accountInfo.closeAuthority);\n  }\n\n  return accountInfo;\n};\n\nexports.deserializeAccount = deserializeAccount; // TODO: expose in spl package\n\nvar deserializeMint = function deserializeMint(data) {\n  if (data.length !== spl_token_1.MintLayout.span) {\n    throw new Error('Not a valid Mint');\n  }\n\n  var mintInfo = spl_token_1.MintLayout.decode(data);\n\n  if (mintInfo.mintAuthorityOption === 0) {\n    mintInfo.mintAuthority = null;\n  } else {\n    mintInfo.mintAuthority = new web3_js_1.PublicKey(mintInfo.mintAuthority);\n  }\n\n  mintInfo.supply = spl_token_1.u64.fromBuffer(mintInfo.supply);\n  mintInfo.isInitialized = mintInfo.isInitialized !== 0;\n\n  if (mintInfo.freezeAuthorityOption === 0) {\n    mintInfo.freezeAuthority = null;\n  } else {\n    mintInfo.freezeAuthority = new web3_js_1.PublicKey(mintInfo.freezeAuthority);\n  }\n\n  return mintInfo;\n};\n\nexports.deserializeMint = deserializeMint;","map":{"version":3,"sources":["../../../../src/contexts/accounts/deserialize.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.deserializeMint = exports.deserializeAccount = void 0;\r\nconst web3_js_1 = require(\"@solana/web3.js\");\r\nconst spl_token_1 = require(\"@solana/spl-token\");\r\n// TODO: expose in spl package\r\nconst deserializeAccount = (data) => {\r\n    const accountInfo = spl_token_1.AccountLayout.decode(data);\r\n    accountInfo.mint = new web3_js_1.PublicKey(accountInfo.mint);\r\n    accountInfo.owner = new web3_js_1.PublicKey(accountInfo.owner);\r\n    accountInfo.amount = spl_token_1.u64.fromBuffer(accountInfo.amount);\r\n    if (accountInfo.delegateOption === 0) {\r\n        accountInfo.delegate = null;\r\n        accountInfo.delegatedAmount = new spl_token_1.u64(0);\r\n    }\r\n    else {\r\n        accountInfo.delegate = new web3_js_1.PublicKey(accountInfo.delegate);\r\n        accountInfo.delegatedAmount = spl_token_1.u64.fromBuffer(accountInfo.delegatedAmount);\r\n    }\r\n    accountInfo.isInitialized = accountInfo.state !== 0;\r\n    accountInfo.isFrozen = accountInfo.state === 2;\r\n    if (accountInfo.isNativeOption === 1) {\r\n        accountInfo.rentExemptReserve = spl_token_1.u64.fromBuffer(accountInfo.isNative);\r\n        accountInfo.isNative = true;\r\n    }\r\n    else {\r\n        accountInfo.rentExemptReserve = null;\r\n        accountInfo.isNative = false;\r\n    }\r\n    if (accountInfo.closeAuthorityOption === 0) {\r\n        accountInfo.closeAuthority = null;\r\n    }\r\n    else {\r\n        accountInfo.closeAuthority = new web3_js_1.PublicKey(accountInfo.closeAuthority);\r\n    }\r\n    return accountInfo;\r\n};\r\nexports.deserializeAccount = deserializeAccount;\r\n// TODO: expose in spl package\r\nconst deserializeMint = (data) => {\r\n    if (data.length !== spl_token_1.MintLayout.span) {\r\n        throw new Error('Not a valid Mint');\r\n    }\r\n    const mintInfo = spl_token_1.MintLayout.decode(data);\r\n    if (mintInfo.mintAuthorityOption === 0) {\r\n        mintInfo.mintAuthority = null;\r\n    }\r\n    else {\r\n        mintInfo.mintAuthority = new web3_js_1.PublicKey(mintInfo.mintAuthority);\r\n    }\r\n    mintInfo.supply = spl_token_1.u64.fromBuffer(mintInfo.supply);\r\n    mintInfo.isInitialized = mintInfo.isInitialized !== 0;\r\n    if (mintInfo.freezeAuthorityOption === 0) {\r\n        mintInfo.freezeAuthority = null;\r\n    }\r\n    else {\r\n        mintInfo.freezeAuthority = new web3_js_1.PublicKey(mintInfo.freezeAuthority);\r\n    }\r\n    return mintInfo;\r\n};\r\nexports.deserializeMint = deserializeMint;\r\n//# sourceMappingURL=deserialize.js.map"]},"metadata":{},"sourceType":"script"}