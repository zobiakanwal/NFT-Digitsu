{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\objectSpread2.js\";import _asyncToGenerator from\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";import _slicedToArray from\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React from'react';import ReactDOM from'react-dom';import{Box,Button,CircularProgress,FormControl,Link as HyperLink,InputLabel,MenuItem,Stack,Select,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,TextField}from'@mui/material';import FilePresentIcon from'@mui/icons-material/FilePresent';import{useWallet}from'@solana/wallet-adapter-react';import{Keypair,PublicKey}from'@solana/web3.js';import{notify,shortenAddress}from'@oyster/common';import BN from'bn.js';import{useConnection,Connection}from'../contexts';import{GUMDROP_DISTRIBUTOR_ID,GUMDROP_TEMPORAL_SIGNER}from'../utils/ids';import{buildGumdrop,dropInfoFor,parseClaimants,validateTransferClaims,validateCandyClaims,validateEditionClaims}from'../utils/claimant';import{distributeAwsSes,distributeAwsSns,distributeManual,distributeWallet,urlAndHandleFor}from'../utils/communication';import{envFor,explorerLinkFor}from'../utils/transactions';import{DragAndDrop}from'./DragAndDrop';import{DefaultModal}from'./DefaultModal';// NB: assumes no overflow\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var randomBytes=function randomBytes(){// TODO: some predictable seed? sha256?\nvar buf=new Uint8Array(4);window.crypto.getRandomValues(buf);return buf;};var WHITESPACE=\"\\xA0\";var distribute=function distribute(method,auth,source,claimants,drop){if(method==='aws-email'){return distributeAwsSes(auth,source,claimants,drop);}else if(method==='aws-sms'){return distributeAwsSns(auth,source,claimants,drop);}else if(method==='manual'){return distributeManual(auth,source,claimants,drop);}else if(method==='wallets'){return distributeWallet(auth,source,claimants,drop);}else{throw new Error(\"Unrecognized claim distribution method \".concat(method));}};var reactModal=function reactModal(renderModal){var container=document.createElement('div');document.body.appendChild(container);var displayModal=function displayModal(_ref){var onSubmit=_ref.onSubmit,onDismiss=_ref.onDismiss;ReactDOM.render(renderModal({onSubmit:onSubmit,onDismiss:onDismiss,show:true}),container);};var hideModal=function hideModal(_ref2,callback){var onSubmit=_ref2.onSubmit,onDismiss=_ref2.onDismiss;ReactDOM.render(renderModal({onSubmit:onSubmit,onDismiss:onDismiss,show:false}),container,callback);};var destroyModal=function destroyModal(){ReactDOM.unmountComponentAtNode(container);document.body.removeChild(container);};var confirmation=new Promise(function(resolve){var onSubmit=function onSubmit(value){return resolve(value);};var onDismiss=function onDismiss(){return resolve(undefined);};displayModal({onSubmit:onSubmit,onDismiss:onDismiss});});return confirmation.finally(function(){var onSubmit=function onSubmit(){};var onDismiss=function onDismiss(){};hideModal({onSubmit:onSubmit,onDismiss:onDismiss},destroyModal);});};var resendOnlyRender=function resendOnlyRender(_ref3){var show=_ref3.show,onSubmit=_ref3.onSubmit,onDismiss=_ref3.onDismiss;var options=[{click:function click(){return onSubmit('create');},name:'Create and Send'},{click:function click(){return onSubmit('send');},name:'Send only'}];return/*#__PURE__*/_jsxs(DefaultModal,{visible:show,onCancel:onDismiss,width:\"70ch\",children:[/*#__PURE__*/_jsx(\"p\",{style:{color:'white',fontSize:'0.9rem',marginTop:8,width:'90%'},children:\"Uploaded distribution list has URLs for all claimants. Skip creation of airdrop and only re-send links?\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Stack,{direction:\"row\",spacing:2,style:{width:'100%'},children:options.map(function(opt){return/*#__PURE__*/_jsx(Button,{style:{width:'100%',color:'white',marginBottom:8},variant:\"outlined\",onClick:opt.click,children:opt.name},opt.name);})})]});};var displayMintTokens=function displayMintTokens(amount,mintInfo){// TODO: better decimal rounding\nreturn String(amount/Math.pow(10,mintInfo.decimals));};var hyperLinkData=function hyperLinkData(data){var encoded=encodeURIComponent(JSON.stringify(data));return\"data:text/plain;charset=utf-8,\".concat(encoded);};var shouldSendRender=function shouldSendRender(claimants,needsPin,claimMethod,claimInfo,baseKey){var limit=1000;// eslint-disable-next-line react/prop-types\nreturn function ClaimPreviewC(_ref4){var show=_ref4.show,onSubmit=_ref4.onSubmit,onDismiss=_ref4.onDismiss;return/*#__PURE__*/_jsxs(DefaultModal,{visible:show,onCancel:onDismiss,width:\"70ch\",children:[/*#__PURE__*/_jsxs(\"h2\",{style:{color:'white',fontWeight:'bold',fontSize:'1.2rem'},children:[\"Claim Distribution Preview\",claimants.length>limit?\" (First \".concat(limit,\")\"):'']}),/*#__PURE__*/_jsx(\"p\",{style:{color:'white',fontSize:'1rem',textAlign:'center'},children:\"Approving will save the keypair authority generated for gumdrop state. This keypair is necessary to close the gumdrop later!\"}),/*#__PURE__*/_jsx(TableContainer,{sx:{'td, th':{color:'white'},backgroundColor:'#444444',borderRadius:'5px',maxHeight:'30ch'},children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Handle\"}),/*#__PURE__*/_jsx(TableCell,{children:claimMethod==='edition'?'Edition':'Tokens'}),needsPin&&/*#__PURE__*/_jsx(TableCell,{children:\"Pin\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:claimants.slice(0,limit).map(function(c,idx){return/*#__PURE__*/_jsxs(TableRow,{sx:{'td, th':{border:0}},children:[/*#__PURE__*/_jsxs(TableCell,{component:\"th\",scope:\"row\",children:[c.handle,' ']}),/*#__PURE__*/_jsx(TableCell,{children:claimMethod==='transfer'?displayMintTokens(c.amount,claimInfo.mint.info):claimMethod==='candy'?c.amount:/* === \"edition\" */c.edition}),needsPin&&/*#__PURE__*/_jsx(TableCell,{children:c.pin.toNumber()})]},idx);})})]})}),/*#__PURE__*/_jsx(Box,{style:{height:'3ch'}}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:2,style:{width:'100%'},children:[/*#__PURE__*/_jsx(Button,{style:{width:'100%',color:'white',marginBottom:8},variant:\"outlined\",onClick:function onClick(){return onSubmit(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(HyperLink,{href:hyperLinkData(Array.from(baseKey.secretKey)),download:\"\".concat(baseKey.publicKey.toBase58(),\".json\"),underline:\"none\",style:{width:'100%'},children:/*#__PURE__*/_jsx(Button,{style:{width:'100%',color:'white',marginBottom:8},variant:\"outlined\",onClick:function onClick(){return onSubmit(true);},children:\"Approve\"})})]})]});};};export var Create=function Create(){var connection=useConnection();var wallet=useWallet();// claim state\nvar _React$useState=React.useState(localStorage.getItem('claimMethod')||''),_React$useState2=_slicedToArray(_React$useState,2),claimMethod=_React$useState2[0],setClaimMethod=_React$useState2[1];var _React$useState3=React.useState(localStorage.getItem('candyConfig')||''),_React$useState4=_slicedToArray(_React$useState3,2),candyConfig=_React$useState4[0],setCandyConfig=_React$useState4[1];var _React$useState5=React.useState(localStorage.getItem('candyUUID')||''),_React$useState6=_slicedToArray(_React$useState5,2),candyUUID=_React$useState6[0],setCandyUUID=_React$useState6[1];var _React$useState7=React.useState(localStorage.getItem('mint')||''),_React$useState8=_slicedToArray(_React$useState7,2),mint=_React$useState8[0],setMint=_React$useState8[1];var _React$useState9=React.useState(localStorage.getItem('masterMint')||''),_React$useState10=_slicedToArray(_React$useState9,2),masterMint=_React$useState10[0],setMasterMint=_React$useState10[1];var _React$useState11=React.useState(''),_React$useState12=_slicedToArray(_React$useState11,2),filename=_React$useState12[0],setFilename=_React$useState12[1];var _React$useState13=React.useState(''),_React$useState14=_slicedToArray(_React$useState13,2),text=_React$useState14[0],setText=_React$useState14[1];// response state\nvar _React$useState15=React.useState([]),_React$useState16=_slicedToArray(_React$useState15,2),claimURLs=_React$useState16[0],setClaimURLs=_React$useState16[1];var _React$useState17=React.useState([]),_React$useState18=_slicedToArray(_React$useState17,2),responses=_React$useState18[0],setResponses=_React$useState18[1];// auth state\nvar _React$useState19=React.useState(localStorage.getItem('otpAuth')||'default'),_React$useState20=_slicedToArray(_React$useState19,2),otpAuth=_React$useState20[0],setOtpAuth=_React$useState20[1];var _React$useState21=React.useState(localStorage.getItem('commMethod')||''),_React$useState22=_slicedToArray(_React$useState21,2),commMethod=_React$useState22[0],setCommMethod=_React$useState22[1];var _React$useState23=React.useState({}),_React$useState24=_slicedToArray(_React$useState23,2),commAuth=_React$useState24[0],setCommAuth=_React$useState24[1];var _React$useState25=React.useState(''),_React$useState26=_slicedToArray(_React$useState25,2),awsAccessKeyId=_React$useState26[0],setAwsAccessKeyId=_React$useState26[1];var _React$useState27=React.useState(''),_React$useState28=_slicedToArray(_React$useState27,2),awsSecretKey=_React$useState28[0],setAwsSecretKey=_React$useState28[1];var commSource='santa@aws.metaplex.com';var explorerUrlFor=function explorerUrlFor(key){return\"https://explorer.solana.com/address/\".concat(key.toBase58(),\"?cluster=\").concat(envFor(connection));};var distributeClaims=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(claimants,drop){var responses;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return distribute(commMethod,commAuth,commSource,claimants,drop);case 2:responses=_context.sent;console.log('Responses',responses);setResponses(responses);// notify if the above routine is actually supposed to do anything\n// (manual and wallet do nothing atm)\nif(commMethod==='aws-email'||commMethod==='aws-sms'){notify({message:'Gumdrop email distribution completed'});}case 6:case\"end\":return _context.stop();}}},_callee);}));return function distributeClaims(_x,_x2){return _ref5.apply(this,arguments);};}();var submit=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var claimants,dropInfo,mightHaveExisting,resendOnly,claimInfo,temporalSigner,base,instructions,shouldSend,createResult;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();setClaimURLs([]);setResponses([]);if(!(!wallet.connected||wallet.publicKey===null)){_context2.next=5;break;}throw new Error(\"Wallet not connected\");case 5:claimants=parseClaimants(text,filename,commMethod);if(!(claimants.length===0)){_context2.next=8;break;}throw new Error(\"No claimants provided\");case 8:dropInfo=dropInfoFor(envFor(connection),claimMethod,mint,candyConfig,masterMint);// check that auth is correct...\n_context2.next=11;return distribute(commMethod,commAuth,commSource,[],dropInfo);case 11:mightHaveExisting=function mightHaveExisting(info){return info.url!==undefined&&info.url!==null;};if(!claimants.reduce(function(acc,c){return acc&&mightHaveExisting(c);},true)){_context2.next=28;break;}_context2.next=15;return reactModal(resendOnlyRender);case 15:resendOnly=_context2.sent;console.log('Resend only',resendOnly);if(!(resendOnly==='send')){_context2.next=24;break;}setClaimURLs(urlAndHandleFor(claimants));_context2.next=21;return distributeClaims(claimants,dropInfo);case 21:return _context2.abrupt(\"return\");case 24:if(!(resendOnly==='create')){_context2.next=27;break;}_context2.next=28;break;case 27:throw new Error('Dismissed');case 28:_context2.t0=claimMethod;_context2.next=_context2.t0==='transfer'?31:_context2.t0==='candy'?35:_context2.t0==='edition'?39:43;break;case 31:_context2.next=33;return validateTransferClaims(connection,wallet.publicKey,claimants,mint);case 33:claimInfo=_context2.sent;return _context2.abrupt(\"break\",44);case 35:_context2.next=37;return validateCandyClaims(connection,wallet.publicKey,claimants,candyConfig,candyUUID);case 37:claimInfo=_context2.sent;return _context2.abrupt(\"break\",44);case 39:_context2.next=41;return validateEditionClaims(connection,wallet.publicKey,claimants,masterMint);case 41:claimInfo=_context2.sent;return _context2.abrupt(\"break\",44);case 43:throw new Error(\"Unknown claim method \".concat(claimMethod));case 44:console.log('Claims info',claimInfo);claimants.forEach(function(c){c.pin=new BN(randomBytes());c.seed=claimMethod==='transfer'?claimInfo.mint.key:claimMethod==='candy'?claimInfo.config:/* === edition */claimInfo.masterMint.key;});// temporal auth is the AWS signer by 'default' and a no-op key otherwise\nif(!(commMethod==='wallets')){_context2.next=50;break;}// TODO: this is a bit jank. There should be no form option to set the\n// OTP auth if we are using a wallet but there's still a defaulted value\n// atm...\n// NB: We also need this to not be 'none' since there is a special check\n// for claimant_secret==accounts.temporal\ntemporalSigner=GUMDROP_DISTRIBUTOR_ID;_context2.next=59;break;case 50:if(!(otpAuth==='default')){_context2.next=54;break;}temporalSigner=GUMDROP_TEMPORAL_SIGNER;_context2.next=59;break;case 54:if(!(otpAuth==='none')){_context2.next=58;break;}temporalSigner=PublicKey.default;_context2.next=59;break;case 58:throw new Error(\"Unknown OTP authorization type \".concat(otpAuth));case 59:console.log(\"Temporal signer: \".concat(temporalSigner.toBase58()));base=Keypair.generate();console.log(\"Base \".concat(base.publicKey.toBase58()));_context2.next=64;return buildGumdrop(connection,wallet.publicKey,commMethod,claimMethod,\"\".concat(window.location.origin).concat(process.env.REACT_APP_WEB_HOME),base.publicKey,temporalSigner,claimants,claimInfo);case 64:instructions=_context2.sent;_context2.next=67;return reactModal(shouldSendRender(claimants,commMethod!=='wallets',claimMethod,claimInfo,base));case 67:shouldSend=_context2.sent;if(!(shouldSend!==true)){_context2.next=70;break;}throw new Error('Claim distribution preview not approved');case 70:setClaimURLs(urlAndHandleFor(claimants));_context2.next=73;return Connection.sendTransactionWithRetry(connection,wallet,instructions,[base]);case 73:createResult=_context2.sent;console.log(createResult);if(!(typeof createResult==='string')){_context2.next=79;break;}throw new Error(createResult);case 79:notify({message:'Gumdrop creation succeeded',description:/*#__PURE__*/_jsx(HyperLink,{href:explorerLinkFor(createResult.txid,connection),children:\"View transaction on explorer\"})});case 80:console.log('Distributing claim URLs');_context2.next=83;return distributeClaims(claimants,dropInfo);case 83:case\"end\":return _context2.stop();}}},_callee2);}));return function submit(_x3){return _ref6.apply(this,arguments);};}();var handleFiles=function handleFiles(files){if(files===null||files.length!==1){notify({message:'File upload failed',description:\"Received \".concat(files===null||files===void 0?void 0:files.length,\" files\")});return;}var file=files[0];var reader=new FileReader();reader.onload=function(e){if(e!==null&&e.target!==null){if(typeof e.target.result==='string'){try{parseClaimants(e.target.result,file.name,commMethod);}catch(_unused){notify({message:\"File upload failed for: \".concat(file.name),description:/*#__PURE__*/_jsxs(\"span\",{children:[\"Could not parse uploaded file.\",WHITESPACE,/*#__PURE__*/_jsx(HyperLink,{href:\"#/\",children:\"Does it follow the JSON scheme?\"})]})});setFilename('');setText('');return;}setFilename(file.name);setText(e.target.result);}else{notify({message:\"File upload failed for: \".concat(file.name),description:'Could not read uploaded file'});}}};reader.readAsText(file);};var claimData=function claimData(claimMethod){if(claimMethod==='candy'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(TextField,{id:\"config-text-field\",label:\"Candy Config\",value:candyConfig,onChange:function onChange(e){setCandyConfig(e.target.value);localStorage.setItem('candyConfig',e.target.value);}}),/*#__PURE__*/_jsx(TextField,{id:\"config-uuid-text-field\",label:\"Candy UUID\",value:candyUUID,onChange:function onChange(e){setCandyUUID(e.target.value);localStorage.setItem('candyUUID',e.target.value);}})]});}else if(claimMethod==='transfer'){return/*#__PURE__*/_jsx(TextField,{id:\"mint-text-field\",label:\"Mint\",value:mint,onChange:function onChange(e){localStorage.setItem('mint',e.target.value);setMint(e.target.value);}});}else if(claimMethod==='edition'){// transfers master mint token from this account to the distributor\n// wallet ATA\nreturn/*#__PURE__*/_jsx(TextField,{id:\"master-mint-text-field\",label:\"Master Mint\",value:masterMint,onChange:function onChange(e){localStorage.setItem('masterMint',e.target.value);setMasterMint(e.target.value);}});}};var commAuthorization=function commAuthorization(commMethod){if(commMethod==='aws-email'||commMethod==='aws-sms'){return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(TextField,{id:\"comm-access-key-id-field\",label:\"\".concat(commMethod,\" Access Key Id\"),value:awsAccessKeyId,onChange:function onChange(e){setCommAuth(function(prev){return _objectSpread(_objectSpread({},prev),{},{accessKeyId:e.target.value});});setAwsAccessKeyId(e.target.value);}}),/*#__PURE__*/_jsx(TextField,{id:\"comm-secret-access-key-field\",label:\"\".concat(commMethod,\" Secret Access Key\"),value:awsSecretKey,onChange:function onChange(e){setCommAuth(function(prev){return _objectSpread(_objectSpread({},prev),{},{secretAccessKey:e.target.value});});setAwsSecretKey(e.target.value);}})]});}// commMethod === \"Manual\" || commMethod === \"Wallets\"\nreturn null;};var fileUpload=/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(DragAndDrop,{handleDrop:handleFiles,children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",style:{height:'15ch'},sx:{border:'1px dashed grey',justifyContent:'center',alignContent:'center'},children:[/*#__PURE__*/_jsxs(Button,{variant:\"text\",component:\"label\",style:{padding:0,// don't make the button click field too large...\nmarginTop:'5ch',marginBottom:'5ch'},children:[\"Upload a \",filename===''?'distribution':'different',\" list\",/*#__PURE__*/_jsx(\"input\",{type:\"file\",onChange:function onChange(e){handleFiles(e.target.files);// re-parse every time...\ne.target.value='';},hidden:true})]}),WHITESPACE,/*#__PURE__*/_jsx(Button,{variant:\"text\",component:\"label\",disabled:true,style:{padding:0,color:'#eee'},children:\"or drag it here\"})]})}),filename!==''?/*#__PURE__*/_jsxs(Button,{variant:\"text\",component:\"label\",disabled:true,style:{padding:0,color:'#eee'},children:[/*#__PURE__*/_jsx(FilePresentIcon,{}),/*#__PURE__*/_jsxs(\"span\",{children:[WHITESPACE,\" Uploaded \",filename]})]}):/*#__PURE__*/_jsx(Box,{})]});var _React$useState29=React.useState(false),_React$useState30=_slicedToArray(_React$useState29,2),loading=_React$useState30[0],setLoading=_React$useState30[1];var loadingProgress=function loadingProgress(){return/*#__PURE__*/_jsx(CircularProgress,{size:24,sx:{position:'absolute',top:'50%',left:'50%',marginTop:'-12px',marginLeft:'-12px'}});};var createAirdrop=/*#__PURE__*/_jsxs(Box,{sx:{position:'relative'},children:[/*#__PURE__*/_jsxs(Button,{disabled:!wallet.connected||!commMethod||!filename||loading,variant:\"contained\",style:{width:'100%'},onClick:function onClick(e){setLoading(true);var wrap=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return submit(e);case 3:setLoading(false);_context3.next=10;break;case 6:_context3.prev=6;_context3.t0=_context3[\"catch\"](0);notify({message:'Create failed',description:\"\".concat(_context3.t0)});setLoading(false);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,6]]);}));return function wrap(){return _ref7.apply(this,arguments);};}();wrap();},children:[\"Create\",claimURLs.length>0?' Another ':' ',\"Gumdrop\"]}),loading&&loadingProgress()]});var otpAuthC=/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"otp-auth-label\",children:\"OTP Authorization\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"otp-auth-label\",id:\"otp-auth-select\",value:otpAuth,label:\"OTP Authorization\",onChange:function onChange(e){localStorage.setItem('otpAuth',e.target.value);setOtpAuth(e.target.value);},style:{textAlign:'left'},children:[/*#__PURE__*/_jsxs(MenuItem,{value:'default',children:[\"Default\",WHITESPACE,/*#__PURE__*/_jsxs(HyperLink,{href:explorerUrlFor(GUMDROP_TEMPORAL_SIGNER),underline:\"none\",target:\"_blank\",rel:\"noopener noreferrer\",children:[\"(\",shortenAddress(GUMDROP_TEMPORAL_SIGNER.toBase58()),\")\"]})]}),/*#__PURE__*/_jsx(MenuItem,{value:'none',children:\"None\"})]})]})});return/*#__PURE__*/_jsxs(Stack,{spacing:2,children:[/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"claim-method-label\",children:\"Claim Method\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"claim-method-label\",id:\"claim-method-select\",value:claimMethod,label:\"Claim Method\",onChange:function onChange(e){localStorage.setItem('claimMethod',e.target.value);setClaimMethod(e.target.value);},style:{textAlign:'left'},children:[/*#__PURE__*/_jsx(MenuItem,{value:'transfer',children:\"Token Transfer\"}),/*#__PURE__*/_jsx(MenuItem,{value:'candy',children:\"Candy Machine\"}),/*#__PURE__*/_jsx(MenuItem,{value:'edition',children:\"Limited Edition\"})]})]}),claimMethod!==''&&claimData(claimMethod),/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,children:[/*#__PURE__*/_jsx(InputLabel,{id:\"comm-method-label\",children:\"Distribution Method\"}),/*#__PURE__*/_jsxs(Select,{labelId:\"comm-method-label\",id:\"comm-method-select\",value:commMethod,label:\"Distribution Method\",onChange:function onChange(e){if(e.target.value==='discord'){notify({message:'Discord distribution unavailable',description:'Please use the CLI for this. Discord does not support browser-connection requests'});return;}localStorage.setItem('commMethod',e.target.value);setCommMethod(e.target.value);},style:{textAlign:'left'},children:[/*#__PURE__*/_jsx(MenuItem,{value:'aws-email',children:\"AWS Email\"}),/*#__PURE__*/_jsx(MenuItem,{value:'aws-sms',children:\"AWS SMS\"}),/*#__PURE__*/_jsx(MenuItem,{value:'discord',children:\"Discord\"}),/*#__PURE__*/_jsx(MenuItem,{value:'wallets',children:\"Wallets\"}),/*#__PURE__*/_jsx(MenuItem,{value:'manual',children:\"Manual\"})]})]}),commMethod!==''&&commAuthorization(commMethod),commMethod!==''&&commMethod!=='wallets'&&otpAuthC,commMethod!==''&&fileUpload,createAirdrop,claimURLs.length>0&&/*#__PURE__*/_jsx(HyperLink,{href:hyperLinkData(claimURLs),download:\"claimURLs.json\",underline:\"none\",style:{width:'100%'},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",style:{width:'100%'},children:\"Download claim URLs\"})}),responses.length>0&&/*#__PURE__*/_jsx(HyperLink,{href:hyperLinkData(responses),download:\"responses.json\",underline:\"none\",style:{width:'100%'},children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",style:{width:'100%'},children:\"Download distribution responses\"})})]});};","map":{"version":3,"sources":["C:/Users/AHSAN PC/Desktop/digitsu/gamp/js/packages/gumdrop/src/components/Create.tsx"],"names":["React","ReactDOM","Box","Button","CircularProgress","FormControl","Link","HyperLink","InputLabel","MenuItem","Stack","Select","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","TextField","FilePresentIcon","useWallet","Keypair","PublicKey","notify","shortenAddress","BN","useConnection","Connection","GUMDROP_DISTRIBUTOR_ID","GUMDROP_TEMPORAL_SIGNER","buildGumdrop","dropInfoFor","parseClaimants","validateTransferClaims","validateCandyClaims","validateEditionClaims","distributeAwsSes","distributeAwsSns","distributeManual","distributeWallet","urlAndHandleFor","envFor","explorerLinkFor","DragAndDrop","DefaultModal","randomBytes","buf","Uint8Array","window","crypto","getRandomValues","WHITESPACE","distribute","method","auth","source","claimants","drop","Error","reactModal","renderModal","container","document","createElement","body","appendChild","displayModal","onSubmit","onDismiss","render","show","hideModal","callback","destroyModal","unmountComponentAtNode","removeChild","confirmation","Promise","resolve","value","undefined","finally","resendOnlyRender","options","click","name","color","fontSize","marginTop","width","map","opt","marginBottom","displayMintTokens","amount","mintInfo","String","Math","pow","decimals","hyperLinkData","data","encoded","encodeURIComponent","JSON","stringify","shouldSendRender","needsPin","claimMethod","claimInfo","baseKey","limit","ClaimPreviewC","fontWeight","length","textAlign","backgroundColor","borderRadius","maxHeight","slice","c","idx","border","handle","mint","info","edition","pin","toNumber","height","Array","from","secretKey","publicKey","toBase58","Create","connection","wallet","useState","localStorage","getItem","setClaimMethod","candyConfig","setCandyConfig","candyUUID","setCandyUUID","setMint","masterMint","setMasterMint","filename","setFilename","text","setText","claimURLs","setClaimURLs","responses","setResponses","otpAuth","setOtpAuth","commMethod","setCommMethod","commAuth","setCommAuth","awsAccessKeyId","setAwsAccessKeyId","awsSecretKey","setAwsSecretKey","commSource","explorerUrlFor","key","distributeClaims","console","log","message","submit","e","preventDefault","connected","dropInfo","mightHaveExisting","url","reduce","acc","resendOnly","forEach","seed","config","temporalSigner","default","base","generate","location","origin","process","env","REACT_APP_WEB_HOME","instructions","shouldSend","sendTransactionWithRetry","createResult","description","txid","handleFiles","files","file","reader","FileReader","onload","target","result","readAsText","claimData","setItem","commAuthorization","prev","accessKeyId","secretAccessKey","fileUpload","justifyContent","alignContent","padding","loading","setLoading","loadingProgress","position","top","left","marginLeft","createAirdrop","wrap","otpAuthC"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport {\r\n  Box,\r\n  Button,\r\n  CircularProgress,\r\n  FormControl,\r\n  Link as HyperLink,\r\n  InputLabel,\r\n  MenuItem,\r\n  Stack,\r\n  Select,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  TextField,\r\n} from '@mui/material';\r\nimport FilePresentIcon from '@mui/icons-material/FilePresent';\r\n\r\nimport { useWallet } from '@solana/wallet-adapter-react';\r\nimport { Keypair, PublicKey } from '@solana/web3.js';\r\nimport { MintInfo } from '@solana/spl-token';\r\nimport { notify, shortenAddress } from '@oyster/common';\r\nimport BN from 'bn.js';\r\n\r\nimport { useConnection, Connection } from '../contexts';\r\nimport { GUMDROP_DISTRIBUTOR_ID, GUMDROP_TEMPORAL_SIGNER } from '../utils/ids';\r\nimport {\r\n  ClaimantInfo,\r\n  Claimants,\r\n  buildGumdrop,\r\n  dropInfoFor,\r\n  parseClaimants,\r\n  validateTransferClaims,\r\n  validateCandyClaims,\r\n  validateEditionClaims,\r\n} from '../utils/claimant';\r\nimport {\r\n  AuthKeys,\r\n  DropInfo,\r\n  Response as DResponse,\r\n  distributeAwsSes,\r\n  distributeAwsSns,\r\n  distributeManual,\r\n  distributeWallet,\r\n  urlAndHandleFor,\r\n} from '../utils/communication';\r\nimport { envFor, explorerLinkFor } from '../utils/transactions';\r\nimport { DragAndDrop } from './DragAndDrop';\r\nimport { DefaultModal } from './DefaultModal';\r\n\r\n// NB: assumes no overflow\r\nconst randomBytes = (): Uint8Array => {\r\n  // TODO: some predictable seed? sha256?\r\n  const buf = new Uint8Array(4);\r\n  window.crypto.getRandomValues(buf);\r\n  return buf;\r\n};\r\n\r\nconst WHITESPACE = '\\u00A0';\r\n\r\nconst distribute = (\r\n  method: string,\r\n  auth: AuthKeys,\r\n  source: string,\r\n  claimants: Claimants,\r\n  drop: DropInfo,\r\n) => {\r\n  if (method === 'aws-email') {\r\n    return distributeAwsSes(auth, source, claimants, drop);\r\n  } else if (method === 'aws-sms') {\r\n    return distributeAwsSns(auth, source, claimants, drop);\r\n  } else if (method === 'manual') {\r\n    return distributeManual(auth, source, claimants, drop);\r\n  } else if (method === 'wallets') {\r\n    return distributeWallet(auth, source, claimants, drop);\r\n  } else {\r\n    throw new Error(`Unrecognized claim distribution method ${method}`);\r\n  }\r\n};\r\n\r\nconst reactModal = renderModal => {\r\n  const container = document.createElement('div');\r\n  document.body.appendChild(container);\r\n\r\n  const displayModal = ({ onSubmit, onDismiss }) => {\r\n    ReactDOM.render(\r\n      renderModal({ onSubmit, onDismiss, show: true }),\r\n      container,\r\n    );\r\n  };\r\n\r\n  const hideModal = ({ onSubmit, onDismiss }, callback) => {\r\n    ReactDOM.render(\r\n      renderModal({ onSubmit, onDismiss, show: false }),\r\n      container,\r\n      callback,\r\n    );\r\n  };\r\n\r\n  const destroyModal = () => {\r\n    ReactDOM.unmountComponentAtNode(container);\r\n    document.body.removeChild(container);\r\n  };\r\n\r\n  const confirmation = new Promise(resolve => {\r\n    const onSubmit = value => resolve(value);\r\n    const onDismiss = () => resolve(undefined);\r\n    displayModal({ onSubmit, onDismiss });\r\n  });\r\n\r\n  return confirmation.finally(() => {\r\n    const onSubmit = () => {};\r\n    const onDismiss = () => {};\r\n    hideModal({ onSubmit, onDismiss }, destroyModal);\r\n  });\r\n};\r\n\r\nconst resendOnlyRender = ({ show, onSubmit, onDismiss }) => {\r\n  const options = [\r\n    { click: () => onSubmit('create'), name: 'Create and Send' },\r\n    { click: () => onSubmit('send'), name: 'Send only' },\r\n  ];\r\n  return (\r\n    <DefaultModal visible={show} onCancel={onDismiss} width=\"70ch\">\r\n      <p\r\n        style={{\r\n          color: 'white',\r\n          fontSize: '0.9rem',\r\n          marginTop: 8,\r\n          width: '90%',\r\n        }}\r\n      >\r\n        Uploaded distribution list has URLs for all claimants. Skip creation of\r\n        airdrop and only re-send links?\r\n      </p>\r\n      <br />\r\n      <Stack direction=\"row\" spacing={2} style={{ width: '100%' }}>\r\n        {options.map(opt => {\r\n          return (\r\n            <Button\r\n              key={opt.name}\r\n              style={{\r\n                width: '100%',\r\n                color: 'white',\r\n                marginBottom: 8,\r\n              }}\r\n              variant=\"outlined\"\r\n              onClick={opt.click}\r\n            >\r\n              {opt.name}\r\n            </Button>\r\n          );\r\n        })}\r\n      </Stack>\r\n    </DefaultModal>\r\n  );\r\n};\r\n\r\nconst displayMintTokens = (amount: number, mintInfo: MintInfo): string => {\r\n  // TODO: better decimal rounding\r\n  return String(amount / Math.pow(10, mintInfo.decimals));\r\n};\r\n\r\nconst hyperLinkData = data => {\r\n  const encoded = encodeURIComponent(JSON.stringify(data));\r\n  return `data:text/plain;charset=utf-8,${encoded}`;\r\n};\r\n\r\nconst shouldSendRender = (\r\n  claimants,\r\n  needsPin,\r\n  claimMethod,\r\n  claimInfo,\r\n  baseKey,\r\n) => {\r\n  const limit = 1000;\r\n  // eslint-disable-next-line react/prop-types\r\n  return function ClaimPreviewC({ show, onSubmit, onDismiss }) {\r\n    return (\r\n      <DefaultModal visible={show} onCancel={onDismiss} width=\"70ch\">\r\n        <h2\r\n          style={{\r\n            color: 'white',\r\n            fontWeight: 'bold',\r\n            fontSize: '1.2rem',\r\n          }}\r\n        >\r\n          Claim Distribution Preview\r\n          {claimants.length > limit ? ` (First ${limit})` : ''}\r\n        </h2>\r\n        <p style={{ color: 'white', fontSize: '1rem', textAlign: 'center' }}>\r\n          Approving will save the keypair authority generated for gumdrop state.\r\n          This keypair is necessary to close the gumdrop later!\r\n        </p>\r\n        <TableContainer\r\n          sx={{\r\n            'td, th': { color: 'white' },\r\n            backgroundColor: '#444444',\r\n            borderRadius: '5px',\r\n            maxHeight: '30ch',\r\n          }}\r\n        >\r\n          <Table size=\"small\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Handle</TableCell>\r\n                <TableCell>\r\n                  {claimMethod === 'edition' ? 'Edition' : 'Tokens'}\r\n                </TableCell>\r\n                {needsPin && <TableCell>Pin</TableCell>}\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {claimants.slice(0, limit).map((c, idx) => (\r\n                <TableRow key={idx} sx={{ 'td, th': { border: 0 } }}>\r\n                  <TableCell component=\"th\" scope=\"row\">\r\n                    {c.handle}{' '}\r\n                  </TableCell>\r\n                  <TableCell>\r\n                    {claimMethod === 'transfer'\r\n                      ? displayMintTokens(c.amount, claimInfo.mint.info)\r\n                      : claimMethod === 'candy'\r\n                      ? c.amount\r\n                      : /* === \"edition\" */ c.edition}\r\n                  </TableCell>\r\n                  {needsPin && <TableCell>{c.pin.toNumber()}</TableCell>}\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        <Box style={{ height: '3ch' }} />\r\n        <Stack direction=\"row\" spacing={2} style={{ width: '100%' }}>\r\n          <Button\r\n            style={{\r\n              width: '100%',\r\n              color: 'white',\r\n              marginBottom: 8,\r\n            }}\r\n            variant=\"outlined\"\r\n            onClick={() => onSubmit(false)}\r\n          >\r\n            Cancel\r\n          </Button>\r\n          <HyperLink\r\n            href={hyperLinkData(Array.from(baseKey.secretKey))}\r\n            download={`${baseKey.publicKey.toBase58()}.json`}\r\n            underline=\"none\"\r\n            style={{ width: '100%' }}\r\n          >\r\n            <Button\r\n              style={{\r\n                width: '100%',\r\n                color: 'white',\r\n                marginBottom: 8,\r\n              }}\r\n              variant=\"outlined\"\r\n              onClick={() => onSubmit(true)}\r\n            >\r\n              Approve\r\n            </Button>\r\n          </HyperLink>\r\n        </Stack>\r\n      </DefaultModal>\r\n    );\r\n  };\r\n};\r\n\r\nexport const Create = () => {\r\n  const connection = useConnection();\r\n  const wallet = useWallet();\r\n\r\n  // claim state\r\n  const [claimMethod, setClaimMethod] = React.useState(\r\n    localStorage.getItem('claimMethod') || '',\r\n  );\r\n  const [candyConfig, setCandyConfig] = React.useState(\r\n    localStorage.getItem('candyConfig') || '',\r\n  );\r\n  const [candyUUID, setCandyUUID] = React.useState(\r\n    localStorage.getItem('candyUUID') || '',\r\n  );\r\n  const [mint, setMint] = React.useState(localStorage.getItem('mint') || '');\r\n  const [masterMint, setMasterMint] = React.useState(\r\n    localStorage.getItem('masterMint') || '',\r\n  );\r\n  const [filename, setFilename] = React.useState('');\r\n  const [text, setText] = React.useState('');\r\n\r\n  // response state\r\n  const [claimURLs, setClaimURLs] = React.useState<\r\n    Array<{ [key: string]: any }>\r\n  >([]);\r\n  const [responses, setResponses] = React.useState<Array<DResponse>>([]);\r\n\r\n  // auth state\r\n  const [otpAuth, setOtpAuth] = React.useState(\r\n    localStorage.getItem('otpAuth') || 'default',\r\n  );\r\n  const [commMethod, setCommMethod] = React.useState(\r\n    localStorage.getItem('commMethod') || '',\r\n  );\r\n  const [commAuth, setCommAuth] = React.useState<AuthKeys>({});\r\n  const [awsAccessKeyId, setAwsAccessKeyId] = React.useState('');\r\n  const [awsSecretKey, setAwsSecretKey] = React.useState('');\r\n  const commSource = 'santa@aws.metaplex.com';\r\n\r\n  const explorerUrlFor = (key: PublicKey) => {\r\n    return `https://explorer.solana.com/address/${key.toBase58()}?cluster=${envFor(\r\n      connection,\r\n    )}`;\r\n  };\r\n\r\n  const distributeClaims = async (claimants, drop) => {\r\n    const responses = await distribute(\r\n      commMethod,\r\n      commAuth,\r\n      commSource,\r\n      claimants,\r\n      drop,\r\n    );\r\n\r\n    console.log('Responses', responses);\r\n    setResponses(responses);\r\n\r\n    // notify if the above routine is actually supposed to do anything\r\n    // (manual and wallet do nothing atm)\r\n    if (commMethod === 'aws-email' || commMethod === 'aws-sms') {\r\n      notify({\r\n        message: 'Gumdrop email distribution completed',\r\n      });\r\n    }\r\n  };\r\n\r\n  const submit = async (e: React.SyntheticEvent) => {\r\n    e.preventDefault();\r\n\r\n    setClaimURLs([]);\r\n    setResponses([]);\r\n\r\n    if (!wallet.connected || wallet.publicKey === null) {\r\n      throw new Error(`Wallet not connected`);\r\n    }\r\n\r\n    const claimants = parseClaimants(text, filename, commMethod);\r\n    if (claimants.length === 0) {\r\n      throw new Error(`No claimants provided`);\r\n    }\r\n\r\n    const dropInfo = dropInfoFor(\r\n      envFor(connection),\r\n      claimMethod,\r\n      mint,\r\n      candyConfig,\r\n      masterMint,\r\n    );\r\n    // check that auth is correct...\r\n    await distribute(commMethod, commAuth, commSource, [], dropInfo);\r\n\r\n    const mightHaveExisting = (info: ClaimantInfo) => {\r\n      return info.url !== undefined && info.url !== null;\r\n    };\r\n    if (claimants.reduce((acc, c) => acc && mightHaveExisting(c), true)) {\r\n      const resendOnly = await reactModal(resendOnlyRender);\r\n      console.log('Resend only', resendOnly);\r\n      if (resendOnly === 'send') {\r\n        setClaimURLs(urlAndHandleFor(claimants));\r\n        await distributeClaims(claimants, dropInfo);\r\n        return;\r\n      } else if (resendOnly === 'create') {\r\n        // fallthrough to full create\r\n      } else {\r\n        // dismissed. don't use exceptions for control flow?\r\n        throw new Error('Dismissed');\r\n      }\r\n    }\r\n\r\n    let claimInfo;\r\n    switch (claimMethod) {\r\n      case 'transfer': {\r\n        claimInfo = await validateTransferClaims(\r\n          connection,\r\n          wallet.publicKey,\r\n          claimants,\r\n          mint,\r\n        );\r\n        break;\r\n      }\r\n      case 'candy': {\r\n        claimInfo = await validateCandyClaims(\r\n          connection,\r\n          wallet.publicKey,\r\n          claimants,\r\n          candyConfig,\r\n          candyUUID,\r\n        );\r\n        break;\r\n      }\r\n      case 'edition': {\r\n        claimInfo = await validateEditionClaims(\r\n          connection,\r\n          wallet.publicKey,\r\n          claimants,\r\n          masterMint,\r\n        );\r\n        break;\r\n      }\r\n      default:\r\n        throw new Error(`Unknown claim method ${claimMethod}`);\r\n    }\r\n    console.log('Claims info', claimInfo);\r\n\r\n    claimants.forEach(c => {\r\n      c.pin = new BN(randomBytes());\r\n      c.seed =\r\n        claimMethod === 'transfer'\r\n          ? claimInfo.mint.key\r\n          : claimMethod === 'candy'\r\n          ? claimInfo.config\r\n          : /* === edition */ claimInfo.masterMint.key;\r\n    });\r\n\r\n    // temporal auth is the AWS signer by 'default' and a no-op key otherwise\r\n    let temporalSigner;\r\n    if (commMethod === 'wallets') {\r\n      // TODO: this is a bit jank. There should be no form option to set the\r\n      // OTP auth if we are using a wallet but there's still a defaulted value\r\n      // atm...\r\n      // NB: We also need this to not be 'none' since there is a special check\r\n      // for claimant_secret==accounts.temporal\r\n      temporalSigner = GUMDROP_DISTRIBUTOR_ID;\r\n    } else if (otpAuth === 'default') {\r\n      temporalSigner = GUMDROP_TEMPORAL_SIGNER;\r\n    } else if (otpAuth === 'none') {\r\n      temporalSigner = PublicKey.default;\r\n    } else {\r\n      throw new Error(`Unknown OTP authorization type ${otpAuth}`);\r\n    }\r\n\r\n    console.log(`Temporal signer: ${temporalSigner.toBase58()}`);\r\n\r\n    const base = Keypair.generate();\r\n    console.log(`Base ${base.publicKey.toBase58()}`);\r\n\r\n    const instructions = await buildGumdrop(\r\n      connection,\r\n      wallet.publicKey,\r\n      commMethod,\r\n      claimMethod,\r\n      `${window.location.origin}${process.env.REACT_APP_WEB_HOME}`,\r\n      base.publicKey,\r\n      temporalSigner,\r\n      claimants,\r\n      claimInfo,\r\n    );\r\n\r\n    const shouldSend = (await reactModal(\r\n      shouldSendRender(\r\n        claimants,\r\n        commMethod !== 'wallets',\r\n        claimMethod,\r\n        claimInfo,\r\n        base,\r\n      ),\r\n    )) as boolean | undefined;\r\n    if (shouldSend !== true) {\r\n      // dismissed. don't use exceptions for control flow?\r\n      throw new Error('Claim distribution preview not approved');\r\n    }\r\n\r\n    setClaimURLs(urlAndHandleFor(claimants));\r\n\r\n    const createResult = await Connection.sendTransactionWithRetry(\r\n      connection,\r\n      wallet,\r\n      instructions,\r\n      [base],\r\n    );\r\n\r\n    console.log(createResult);\r\n    if (typeof createResult === 'string') {\r\n      throw new Error(createResult);\r\n    } else {\r\n      notify({\r\n        message: 'Gumdrop creation succeeded',\r\n        description: (\r\n          <HyperLink href={explorerLinkFor(createResult.txid, connection)}>\r\n            View transaction on explorer\r\n          </HyperLink>\r\n        ),\r\n      });\r\n    }\r\n\r\n    console.log('Distributing claim URLs');\r\n    await distributeClaims(claimants, dropInfo);\r\n  };\r\n\r\n  const handleFiles = (files: FileList | null) => {\r\n    if (files === null || files.length !== 1) {\r\n      notify({\r\n        message: 'File upload failed',\r\n        description: `Received ${files?.length} files`,\r\n      });\r\n      return;\r\n    }\r\n\r\n    const file = files[0];\r\n    const reader = new FileReader();\r\n    reader.onload = e => {\r\n      if (e !== null && e.target !== null) {\r\n        if (typeof e.target.result === 'string') {\r\n          try {\r\n            parseClaimants(e.target.result, file.name, commMethod);\r\n          } catch {\r\n            notify({\r\n              message: `File upload failed for: ${file.name}`,\r\n              description: (\r\n                <span>\r\n                  Could not parse uploaded file.{WHITESPACE}\r\n                  <HyperLink href=\"#/\">\r\n                    Does it follow the JSON scheme?\r\n                  </HyperLink>\r\n                </span>\r\n              ),\r\n            });\r\n            setFilename('');\r\n            setText('');\r\n            return;\r\n          }\r\n          setFilename(file.name);\r\n          setText(e.target.result);\r\n        } else {\r\n          notify({\r\n            message: `File upload failed for: ${file.name}`,\r\n            description: 'Could not read uploaded file',\r\n          });\r\n        }\r\n      }\r\n    };\r\n    reader.readAsText(file);\r\n  };\r\n\r\n  const claimData = claimMethod => {\r\n    if (claimMethod === 'candy') {\r\n      return (\r\n        <React.Fragment>\r\n          <TextField\r\n            id=\"config-text-field\"\r\n            label=\"Candy Config\"\r\n            value={candyConfig}\r\n            onChange={e => {\r\n              setCandyConfig(e.target.value);\r\n              localStorage.setItem('candyConfig', e.target.value);\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"config-uuid-text-field\"\r\n            label=\"Candy UUID\"\r\n            value={candyUUID}\r\n            onChange={e => {\r\n              setCandyUUID(e.target.value);\r\n              localStorage.setItem('candyUUID', e.target.value);\r\n            }}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    } else if (claimMethod === 'transfer') {\r\n      return (\r\n        <TextField\r\n          id=\"mint-text-field\"\r\n          label=\"Mint\"\r\n          value={mint}\r\n          onChange={e => {\r\n            localStorage.setItem('mint', e.target.value);\r\n            setMint(e.target.value);\r\n          }}\r\n        />\r\n      );\r\n    } else if (claimMethod === 'edition') {\r\n      // transfers master mint token from this account to the distributor\r\n      // wallet ATA\r\n      return (\r\n        <TextField\r\n          id=\"master-mint-text-field\"\r\n          label=\"Master Mint\"\r\n          value={masterMint}\r\n          onChange={e => {\r\n            localStorage.setItem('masterMint', e.target.value);\r\n            setMasterMint(e.target.value);\r\n          }}\r\n        />\r\n      );\r\n    }\r\n  };\r\n\r\n  const commAuthorization = commMethod => {\r\n    if (commMethod === 'aws-email' || commMethod === 'aws-sms') {\r\n      return (\r\n        <React.Fragment>\r\n          <TextField\r\n            id=\"comm-access-key-id-field\"\r\n            label={`${commMethod} Access Key Id`}\r\n            value={awsAccessKeyId}\r\n            onChange={e => {\r\n              setCommAuth(prev => ({ ...prev, accessKeyId: e.target.value }));\r\n              setAwsAccessKeyId(e.target.value);\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"comm-secret-access-key-field\"\r\n            label={`${commMethod} Secret Access Key`}\r\n            value={awsSecretKey}\r\n            onChange={e => {\r\n              setCommAuth(prev => ({\r\n                ...prev,\r\n                secretAccessKey: e.target.value,\r\n              }));\r\n              setAwsSecretKey(e.target.value);\r\n            }}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    }\r\n\r\n    // commMethod === \"Manual\" || commMethod === \"Wallets\"\r\n    return null;\r\n  };\r\n\r\n  const fileUpload = (\r\n    <React.Fragment>\r\n      <DragAndDrop handleDrop={handleFiles}>\r\n        <Stack\r\n          direction=\"row\"\r\n          style={{\r\n            height: '15ch',\r\n          }}\r\n          sx={{\r\n            border: '1px dashed grey',\r\n            justifyContent: 'center',\r\n            alignContent: 'center',\r\n          }}\r\n        >\r\n          <Button\r\n            variant=\"text\"\r\n            component=\"label\"\r\n            style={{\r\n              padding: 0,\r\n              // don't make the button click field too large...\r\n              marginTop: '5ch',\r\n              marginBottom: '5ch',\r\n            }}\r\n          >\r\n            Upload a {filename === '' ? 'distribution' : 'different'} list\r\n            <input\r\n              type=\"file\"\r\n              onChange={e => {\r\n                handleFiles(e.target.files);\r\n                // re-parse every time...\r\n                e.target.value = '';\r\n              }}\r\n              hidden\r\n            />\r\n          </Button>\r\n          {WHITESPACE}\r\n          {/*For display alignment...*/}\r\n          <Button\r\n            variant=\"text\"\r\n            component=\"label\"\r\n            disabled={true}\r\n            style={{\r\n              padding: 0,\r\n              color: '#eee',\r\n            }}\r\n          >\r\n            or drag it here\r\n          </Button>\r\n        </Stack>\r\n      </DragAndDrop>\r\n      {filename !== '' ? (\r\n        <Button\r\n          variant=\"text\"\r\n          component=\"label\"\r\n          disabled={true}\r\n          style={{\r\n            padding: 0,\r\n            color: '#eee',\r\n          }}\r\n        >\r\n          <FilePresentIcon />\r\n          <span>\r\n            {WHITESPACE} Uploaded {filename}\r\n          </span>\r\n        </Button>\r\n      ) : (\r\n        <Box />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n\r\n  const [loading, setLoading] = React.useState(false);\r\n  const loadingProgress = () => (\r\n    <CircularProgress\r\n      size={24}\r\n      sx={{\r\n        position: 'absolute',\r\n        top: '50%',\r\n        left: '50%',\r\n        marginTop: '-12px',\r\n        marginLeft: '-12px',\r\n      }}\r\n    />\r\n  );\r\n  const createAirdrop = (\r\n    <Box sx={{ position: 'relative' }}>\r\n      <Button\r\n        disabled={!wallet.connected || !commMethod || !filename || loading}\r\n        variant=\"contained\"\r\n        style={{ width: '100%' }}\r\n        onClick={e => {\r\n          setLoading(true);\r\n          const wrap = async () => {\r\n            try {\r\n              await submit(e);\r\n              setLoading(false);\r\n            } catch (err) {\r\n              notify({\r\n                message: 'Create failed',\r\n                description: `${err}`,\r\n              });\r\n              setLoading(false);\r\n            }\r\n          };\r\n          wrap();\r\n        }}\r\n      >\r\n        Create{claimURLs.length > 0 ? ' Another ' : ' '}Gumdrop\r\n      </Button>\r\n      {loading && loadingProgress()}\r\n    </Box>\r\n  );\r\n\r\n  const otpAuthC = (\r\n    <React.Fragment>\r\n      <FormControl fullWidth>\r\n        <InputLabel id=\"otp-auth-label\">OTP Authorization</InputLabel>\r\n        <Select\r\n          labelId=\"otp-auth-label\"\r\n          id=\"otp-auth-select\"\r\n          value={otpAuth}\r\n          label=\"OTP Authorization\"\r\n          onChange={e => {\r\n            localStorage.setItem('otpAuth', e.target.value);\r\n            setOtpAuth(e.target.value);\r\n          }}\r\n          style={{ textAlign: 'left' }}\r\n        >\r\n          <MenuItem value={'default'}>\r\n            Default{WHITESPACE}\r\n            <HyperLink\r\n              href={explorerUrlFor(GUMDROP_TEMPORAL_SIGNER)}\r\n              underline=\"none\"\r\n              target=\"_blank\"\r\n              rel=\"noopener noreferrer\"\r\n            >\r\n              ({shortenAddress(GUMDROP_TEMPORAL_SIGNER.toBase58())})\r\n            </HyperLink>\r\n          </MenuItem>\r\n          <MenuItem value={'none'}>None</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n    </React.Fragment>\r\n  );\r\n\r\n  return (\r\n    <Stack spacing={2}>\r\n      <FormControl fullWidth>\r\n        <InputLabel id=\"claim-method-label\">Claim Method</InputLabel>\r\n        <Select\r\n          labelId=\"claim-method-label\"\r\n          id=\"claim-method-select\"\r\n          value={claimMethod}\r\n          label=\"Claim Method\"\r\n          onChange={e => {\r\n            localStorage.setItem('claimMethod', e.target.value);\r\n            setClaimMethod(e.target.value);\r\n          }}\r\n          style={{ textAlign: 'left' }}\r\n        >\r\n          <MenuItem value={'transfer'}>Token Transfer</MenuItem>\r\n          <MenuItem value={'candy'}>Candy Machine</MenuItem>\r\n          <MenuItem value={'edition'}>Limited Edition</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      {claimMethod !== '' && claimData(claimMethod)}\r\n      <FormControl fullWidth>\r\n        <InputLabel id=\"comm-method-label\">Distribution Method</InputLabel>\r\n        <Select\r\n          labelId=\"comm-method-label\"\r\n          id=\"comm-method-select\"\r\n          value={commMethod}\r\n          label=\"Distribution Method\"\r\n          onChange={e => {\r\n            if (e.target.value === 'discord') {\r\n              notify({\r\n                message: 'Discord distribution unavailable',\r\n                description:\r\n                  'Please use the CLI for this. Discord does not support browser-connection requests',\r\n              });\r\n              return;\r\n            }\r\n            localStorage.setItem('commMethod', e.target.value);\r\n            setCommMethod(e.target.value);\r\n          }}\r\n          style={{ textAlign: 'left' }}\r\n        >\r\n          <MenuItem value={'aws-email'}>AWS Email</MenuItem>\r\n          <MenuItem value={'aws-sms'}>AWS SMS</MenuItem>\r\n          <MenuItem value={'discord'}>Discord</MenuItem>\r\n          <MenuItem value={'wallets'}>Wallets</MenuItem>\r\n          <MenuItem value={'manual'}>Manual</MenuItem>\r\n        </Select>\r\n      </FormControl>\r\n      {commMethod !== '' && commAuthorization(commMethod)}\r\n      {commMethod !== '' && commMethod !== 'wallets' && otpAuthC}\r\n      {commMethod !== '' && fileUpload}\r\n      {createAirdrop}\r\n      {claimURLs.length > 0 && (\r\n        <HyperLink\r\n          href={hyperLinkData(claimURLs)}\r\n          download=\"claimURLs.json\"\r\n          underline=\"none\"\r\n          style={{ width: '100%' }}\r\n        >\r\n          <Button variant=\"contained\" style={{ width: '100%' }}>\r\n            Download claim URLs\r\n          </Button>\r\n        </HyperLink>\r\n      )}\r\n      {responses.length > 0 && (\r\n        <HyperLink\r\n          href={hyperLinkData(responses)}\r\n          download=\"responses.json\"\r\n          underline=\"none\"\r\n          style={{ width: '100%' }}\r\n        >\r\n          <Button variant=\"contained\" style={{ width: '100%' }}>\r\n            Download distribution responses\r\n          </Button>\r\n        </HyperLink>\r\n      )}\r\n    </Stack>\r\n  );\r\n};\r\n"]},"metadata":{},"sourceType":"module"}