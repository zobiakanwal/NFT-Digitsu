{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\");\n\nvar _toConsumableArray = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\toConsumableArray.js\").default;\n\nvar _createClass = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\createClass.js\").default;\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\classCallCheck.js\").default;\n\nvar _inherits = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\inherits.js\").default;\n\nvar _createSuper = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\createSuper.js\").default;\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.computeCreatorOffset = exports.MAX_CREATOR_LEN = exports.MAX_URI_LENGTH = exports.MAX_SYMBOL_LENGTH = exports.MAX_NAME_LENGTH = exports.Metadata = exports.MetadataData = exports.MetadataDataData = exports.DataV2 = exports.Creator = void 0;\n\nvar mpl_core_1 = require(\"@metaplex-foundation/mpl-core\");\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar bn_js_1 = __importDefault(require(\"bn.js\"));\n\nvar bs58_1 = __importDefault(require(\"bs58\"));\n\nvar buffer_1 = require(\"buffer\");\n\nvar MetadataProgram_1 = require(\"../MetadataProgram\");\n\nvar Edition_1 = require(\"./Edition\");\n\nvar MasterEdition_1 = require(\"./MasterEdition\");\n\nvar Uses_1 = require(\"./Uses\");\n\nvar Collection_1 = require(\"./Collection\");\n\nvar constants_1 = require(\"./constants\");\n\nvar Creator = /*#__PURE__*/function (_mpl_core_1$Borsh$Dat) {\n  _inherits(Creator, _mpl_core_1$Borsh$Dat);\n\n  var _super = _createSuper(Creator);\n\n  function Creator() {\n    _classCallCheck(this, Creator);\n\n    return _super.apply(this, arguments);\n  }\n\n  return _createClass(Creator);\n}(mpl_core_1.Borsh.Data);\n\nexports.Creator = Creator;\nCreator.SCHEMA = Creator.struct([['address', 'pubkeyAsString'], ['verified', 'u8'], ['share', 'u8']]);\n\nvar DataV2 = /*#__PURE__*/function (_mpl_core_1$Borsh$Dat2) {\n  _inherits(DataV2, _mpl_core_1$Borsh$Dat2);\n\n  var _super2 = _createSuper(DataV2);\n\n  function DataV2() {\n    _classCallCheck(this, DataV2);\n\n    return _super2.apply(this, arguments);\n  }\n\n  return _createClass(DataV2);\n}(mpl_core_1.Borsh.Data);\n\nexports.DataV2 = DataV2;\nDataV2.SCHEMA = new Map([].concat(_toConsumableArray(Creator.SCHEMA), _toConsumableArray(Collection_1.Collection.SCHEMA), _toConsumableArray(Uses_1.Uses.SCHEMA), _toConsumableArray(DataV2.struct([['name', 'string'], ['symbol', 'string'], ['uri', 'string'], ['sellerFeeBasisPoints', 'u16'], ['creators', {\n  kind: 'option',\n  type: [Creator]\n}], ['collection', {\n  kind: 'option',\n  type: Collection_1.Collection\n}], ['uses', {\n  kind: 'option',\n  type: Uses_1.Uses\n}]]))));\n\nvar MetadataDataData = /*#__PURE__*/function (_mpl_core_1$Borsh$Dat3) {\n  _inherits(MetadataDataData, _mpl_core_1$Borsh$Dat3);\n\n  var _super3 = _createSuper(MetadataDataData);\n\n  function MetadataDataData(args) {\n    var _this;\n\n    _classCallCheck(this, MetadataDataData);\n\n    _this = _super3.call(this, args);\n    var METADATA_REPLACE = new RegExp(\"\\0\", 'g');\n    _this.name = args.name.replace(METADATA_REPLACE, '');\n    _this.uri = args.uri.replace(METADATA_REPLACE, '');\n    _this.symbol = args.symbol.replace(METADATA_REPLACE, '');\n    return _this;\n  }\n\n  return _createClass(MetadataDataData);\n}(mpl_core_1.Borsh.Data);\n\nexports.MetadataDataData = MetadataDataData;\nMetadataDataData.SCHEMA = new Map([].concat(_toConsumableArray(Creator.SCHEMA), _toConsumableArray(MetadataDataData.struct([['name', 'string'], ['symbol', 'string'], ['uri', 'string'], ['sellerFeeBasisPoints', 'u16'], ['creators', {\n  kind: 'option',\n  type: [Creator]\n}]]))));\n\nvar MetadataData = /*#__PURE__*/function (_mpl_core_1$Borsh$Dat4) {\n  _inherits(MetadataData, _mpl_core_1$Borsh$Dat4);\n\n  var _super4 = _createSuper(MetadataData);\n\n  function MetadataData(args) {\n    var _this2;\n\n    _classCallCheck(this, MetadataData);\n\n    _this2 = _super4.call(this, args);\n    _this2.key = constants_1.MetadataKey.MetadataV1;\n    return _this2;\n  }\n\n  return _createClass(MetadataData);\n}(mpl_core_1.Borsh.Data);\n\nexports.MetadataData = MetadataData;\nMetadataData.SCHEMA = new Map([].concat(_toConsumableArray(MetadataDataData.SCHEMA), _toConsumableArray(Collection_1.Collection.SCHEMA), _toConsumableArray(Uses_1.Uses.SCHEMA), _toConsumableArray(MetadataData.struct([['key', 'u8'], ['updateAuthority', 'pubkeyAsString'], ['mint', 'pubkeyAsString'], ['data', MetadataDataData], ['primarySaleHappened', 'u8'], ['isMutable', 'u8'], ['editionNonce', {\n  kind: 'option',\n  type: 'u8'\n}], ['tokenStandard', {\n  kind: 'option',\n  type: 'u8'\n}], ['collection', {\n  kind: 'option',\n  type: Collection_1.Collection\n}], ['uses', {\n  kind: 'option',\n  type: Uses_1.Uses\n}]]))));\n\nvar Metadata = /*#__PURE__*/function (_mpl_core_1$Account) {\n  _inherits(Metadata, _mpl_core_1$Account);\n\n  var _super5 = _createSuper(Metadata);\n\n  function Metadata(pubkey, info) {\n    var _this3;\n\n    _classCallCheck(this, Metadata);\n\n    _this3 = _super5.call(this, pubkey, info);\n\n    if (!_this3.assertOwner(MetadataProgram_1.MetadataProgram.PUBKEY)) {\n      throw (0, mpl_core_1.ERROR_INVALID_OWNER)();\n    }\n\n    if (!Metadata.isCompatible(_this3.info.data)) {\n      throw (0, mpl_core_1.ERROR_INVALID_ACCOUNT_DATA)();\n    }\n\n    _this3.data = MetadataData.deserialize(_this3.info.data);\n    return _this3;\n  }\n\n  _createClass(Metadata, null, [{\n    key: \"isCompatible\",\n    value: function isCompatible(data) {\n      return data[0] === constants_1.MetadataKey.MetadataV1;\n    }\n  }, {\n    key: \"getPDA\",\n    value: function getPDA(mint) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                return _context.abrupt(\"return\", MetadataProgram_1.MetadataProgram.findProgramAddress([buffer_1.Buffer.from(MetadataProgram_1.MetadataProgram.PREFIX), MetadataProgram_1.MetadataProgram.PUBKEY.toBuffer(), new web3_js_1.PublicKey(mint).toBuffer()]));\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n    }\n  }, {\n    key: \"findMany\",\n    value: function findMany(connection) {\n      var filters = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var baseFilters;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                baseFilters = [{\n                  memcmp: {\n                    offset: 0,\n                    bytes: bs58_1.default.encode(buffer_1.Buffer.from([constants_1.MetadataKey.MetadataV1]))\n                  }\n                }, filters.updateAuthority && {\n                  memcmp: {\n                    offset: 1,\n                    bytes: new web3_js_1.PublicKey(filters.updateAuthority).toBase58()\n                  }\n                }, filters.mint && {\n                  memcmp: {\n                    offset: 33,\n                    bytes: new web3_js_1.PublicKey(filters.mint).toBase58()\n                  }\n                }].filter(Boolean);\n\n                if (!filters.creators) {\n                  _context2.next = 7;\n                  break;\n                }\n\n                _context2.next = 4;\n                return Promise.all(Array.from(Array(mpl_core_1.config.maxCreatorLimit).keys()).reduce(function (prev, i) {\n                  return [].concat(_toConsumableArray(prev), _toConsumableArray(filters.creators.map(function (pubkey) {\n                    return MetadataProgram_1.MetadataProgram.getProgramAccounts(connection, {\n                      filters: [].concat(_toConsumableArray(baseFilters), [{\n                        memcmp: {\n                          offset: (0, exports.computeCreatorOffset)(i),\n                          bytes: new web3_js_1.PublicKey(pubkey).toBase58()\n                        }\n                      }])\n                    });\n                  })));\n                }, []));\n\n              case 4:\n                return _context2.abrupt(\"return\", _context2.sent.flat().map(function (account) {\n                  return Metadata.from(account);\n                }));\n\n              case 7:\n                _context2.next = 9;\n                return MetadataProgram_1.MetadataProgram.getProgramAccounts(connection, {\n                  filters: baseFilters\n                });\n\n              case 9:\n                return _context2.abrupt(\"return\", _context2.sent.map(function (account) {\n                  return Metadata.from(account);\n                }));\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n    }\n  }, {\n    key: \"findByOwner\",\n    value: function findByOwner(connection, owner) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n        var accounts, accountMap, allMetadata;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return mpl_core_1.TokenAccount.getTokenAccountsByOwner(connection, owner);\n\n              case 2:\n                accounts = _context3.sent;\n                accountMap = new Map(accounts.map(function (_ref) {\n                  var data = _ref.data;\n                  return [data.mint.toString(), data];\n                }));\n                _context3.next = 6;\n                return Metadata.findMany(connection);\n\n              case 6:\n                allMetadata = _context3.sent;\n                return _context3.abrupt(\"return\", allMetadata.filter(function (metadata) {\n                  var _a, _b;\n\n                  return accountMap.has(metadata.data.mint) && (((_b = (_a = accountMap === null || accountMap === void 0 ? void 0 : accountMap.get(metadata.data.mint)) === null || _a === void 0 ? void 0 : _a.amount) === null || _b === void 0 ? void 0 : _b.toNumber()) || 0) > 0;\n                }));\n\n              case 8:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n    }\n  }, {\n    key: \"findByOwnerV2\",\n    value: function findByOwnerV2(connection, owner) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n        var accounts, accountsWithAmount;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return mpl_core_1.TokenAccount.getTokenAccountsByOwner(connection, owner);\n\n              case 2:\n                accounts = _context4.sent;\n                accountsWithAmount = accounts.map(function (_ref2) {\n                  var data = _ref2.data;\n                  return data;\n                }).filter(function (_ref3) {\n                  var amount = _ref3.amount;\n                  return (amount === null || amount === void 0 ? void 0 : amount.toNumber()) > 0;\n                });\n                _context4.next = 6;\n                return Promise.all(accountsWithAmount.map(function (_ref4) {\n                  var mint = _ref4.mint;\n                  return Metadata.findMany(connection, {\n                    mint: mint\n                  });\n                }));\n\n              case 6:\n                return _context4.abrupt(\"return\", _context4.sent.flat());\n\n              case 7:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n    }\n  }, {\n    key: \"findDataByOwner\",\n    value: function findDataByOwner(connection, owner) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee5() {\n        var accounts, metadataPdaLookups, metadataAddresses, tokenInfo;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                _context5.next = 2;\n                return mpl_core_1.TokenAccount.getTokenAccountsByOwner(connection, owner);\n\n              case 2:\n                accounts = _context5.sent;\n                metadataPdaLookups = accounts.reduce(function (memo, _ref5) {\n                  var data = _ref5.data;\n\n                  var _a;\n\n                  return ((_a = data.amount) === null || _a === void 0 ? void 0 : _a.eq(new bn_js_1.default(1))) ? [].concat(_toConsumableArray(memo), [Metadata.getPDA(data.mint)]) : memo;\n                }, []);\n                _context5.next = 6;\n                return Promise.all(metadataPdaLookups);\n\n              case 6:\n                metadataAddresses = _context5.sent;\n                _context5.next = 9;\n                return mpl_core_1.Account.getInfos(connection, metadataAddresses);\n\n              case 9:\n                tokenInfo = _context5.sent;\n                return _context5.abrupt(\"return\", Array.from(tokenInfo.values()).map(function (m) {\n                  return MetadataData.deserialize(m.data);\n                }));\n\n              case 11:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n    }\n  }, {\n    key: \"getEdition\",\n    value: function getEdition(connection, mint) {\n      return __awaiter(this, void 0, void 0, /*#__PURE__*/_regeneratorRuntime.mark(function _callee6() {\n        var pda, info, key;\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return Edition_1.Edition.getPDA(mint);\n\n              case 2:\n                pda = _context6.sent;\n                _context6.next = 5;\n                return mpl_core_1.Account.getInfo(connection, pda);\n\n              case 5:\n                info = _context6.sent;\n                key = info === null || info === void 0 ? void 0 : info.data[0];\n                _context6.t0 = key;\n                _context6.next = _context6.t0 === constants_1.MetadataKey.EditionV1 ? 10 : _context6.t0 === constants_1.MetadataKey.MasterEditionV1 ? 11 : _context6.t0 === constants_1.MetadataKey.MasterEditionV2 ? 11 : 12;\n                break;\n\n              case 10:\n                return _context6.abrupt(\"return\", new Edition_1.Edition(pda, info));\n\n              case 11:\n                return _context6.abrupt(\"return\", new MasterEdition_1.MasterEdition(pda, info));\n\n              case 12:\n                return _context6.abrupt(\"return\");\n\n              case 13:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n    }\n  }]);\n\n  return Metadata;\n}(mpl_core_1.Account);\n\nexports.Metadata = Metadata;\nexports.MAX_NAME_LENGTH = 32;\nexports.MAX_SYMBOL_LENGTH = 10;\nexports.MAX_URI_LENGTH = 200;\nexports.MAX_CREATOR_LEN = 32 + 1 + 1;\n\nvar computeCreatorOffset = function computeCreatorOffset(index) {\n  return 1 + 32 + 32 + 4 + exports.MAX_NAME_LENGTH + 4 + exports.MAX_URI_LENGTH + 4 + exports.MAX_SYMBOL_LENGTH + 2 + 1 + 4 + index * exports.MAX_CREATOR_LEN;\n};\n\nexports.computeCreatorOffset = computeCreatorOffset;","map":{"version":3,"sources":["../../../src/accounts/Metadata.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.computeCreatorOffset = exports.MAX_CREATOR_LEN = exports.MAX_URI_LENGTH = exports.MAX_SYMBOL_LENGTH = exports.MAX_NAME_LENGTH = exports.Metadata = exports.MetadataData = exports.MetadataDataData = exports.DataV2 = exports.Creator = void 0;\nconst mpl_core_1 = require(\"@metaplex-foundation/mpl-core\");\nconst web3_js_1 = require(\"@solana/web3.js\");\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\nconst bs58_1 = __importDefault(require(\"bs58\"));\nconst buffer_1 = require(\"buffer\");\nconst MetadataProgram_1 = require(\"../MetadataProgram\");\nconst Edition_1 = require(\"./Edition\");\nconst MasterEdition_1 = require(\"./MasterEdition\");\nconst Uses_1 = require(\"./Uses\");\nconst Collection_1 = require(\"./Collection\");\nconst constants_1 = require(\"./constants\");\nclass Creator extends mpl_core_1.Borsh.Data {\n}\nexports.Creator = Creator;\nCreator.SCHEMA = Creator.struct([\n    ['address', 'pubkeyAsString'],\n    ['verified', 'u8'],\n    ['share', 'u8'],\n]);\nclass DataV2 extends mpl_core_1.Borsh.Data {\n}\nexports.DataV2 = DataV2;\nDataV2.SCHEMA = new Map([\n    ...Creator.SCHEMA,\n    ...Collection_1.Collection.SCHEMA,\n    ...Uses_1.Uses.SCHEMA,\n    ...DataV2.struct([\n        ['name', 'string'],\n        ['symbol', 'string'],\n        ['uri', 'string'],\n        ['sellerFeeBasisPoints', 'u16'],\n        ['creators', { kind: 'option', type: [Creator] }],\n        ['collection', { kind: 'option', type: Collection_1.Collection }],\n        ['uses', { kind: 'option', type: Uses_1.Uses }],\n    ]),\n]);\nclass MetadataDataData extends mpl_core_1.Borsh.Data {\n    constructor(args) {\n        super(args);\n        const METADATA_REPLACE = new RegExp('\\u0000', 'g');\n        this.name = args.name.replace(METADATA_REPLACE, '');\n        this.uri = args.uri.replace(METADATA_REPLACE, '');\n        this.symbol = args.symbol.replace(METADATA_REPLACE, '');\n    }\n}\nexports.MetadataDataData = MetadataDataData;\nMetadataDataData.SCHEMA = new Map([\n    ...Creator.SCHEMA,\n    ...MetadataDataData.struct([\n        ['name', 'string'],\n        ['symbol', 'string'],\n        ['uri', 'string'],\n        ['sellerFeeBasisPoints', 'u16'],\n        ['creators', { kind: 'option', type: [Creator] }],\n    ]),\n]);\nclass MetadataData extends mpl_core_1.Borsh.Data {\n    constructor(args) {\n        super(args);\n        this.key = constants_1.MetadataKey.MetadataV1;\n    }\n}\nexports.MetadataData = MetadataData;\nMetadataData.SCHEMA = new Map([\n    ...MetadataDataData.SCHEMA,\n    ...Collection_1.Collection.SCHEMA,\n    ...Uses_1.Uses.SCHEMA,\n    ...MetadataData.struct([\n        ['key', 'u8'],\n        ['updateAuthority', 'pubkeyAsString'],\n        ['mint', 'pubkeyAsString'],\n        ['data', MetadataDataData],\n        ['primarySaleHappened', 'u8'],\n        ['isMutable', 'u8'],\n        ['editionNonce', { kind: 'option', type: 'u8' }],\n        ['tokenStandard', { kind: 'option', type: 'u8' }],\n        ['collection', { kind: 'option', type: Collection_1.Collection }],\n        ['uses', { kind: 'option', type: Uses_1.Uses }],\n    ]),\n]);\nclass Metadata extends mpl_core_1.Account {\n    constructor(pubkey, info) {\n        super(pubkey, info);\n        if (!this.assertOwner(MetadataProgram_1.MetadataProgram.PUBKEY)) {\n            throw (0, mpl_core_1.ERROR_INVALID_OWNER)();\n        }\n        if (!Metadata.isCompatible(this.info.data)) {\n            throw (0, mpl_core_1.ERROR_INVALID_ACCOUNT_DATA)();\n        }\n        this.data = MetadataData.deserialize(this.info.data);\n    }\n    static isCompatible(data) {\n        return data[0] === constants_1.MetadataKey.MetadataV1;\n    }\n    static getPDA(mint) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return MetadataProgram_1.MetadataProgram.findProgramAddress([\n                buffer_1.Buffer.from(MetadataProgram_1.MetadataProgram.PREFIX),\n                MetadataProgram_1.MetadataProgram.PUBKEY.toBuffer(),\n                new web3_js_1.PublicKey(mint).toBuffer(),\n            ]);\n        });\n    }\n    static findMany(connection, filters = {}) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const baseFilters = [\n                {\n                    memcmp: {\n                        offset: 0,\n                        bytes: bs58_1.default.encode(buffer_1.Buffer.from([constants_1.MetadataKey.MetadataV1])),\n                    },\n                },\n                filters.updateAuthority && {\n                    memcmp: {\n                        offset: 1,\n                        bytes: new web3_js_1.PublicKey(filters.updateAuthority).toBase58(),\n                    },\n                },\n                filters.mint && {\n                    memcmp: {\n                        offset: 33,\n                        bytes: new web3_js_1.PublicKey(filters.mint).toBase58(),\n                    },\n                },\n            ].filter(Boolean);\n            if (filters.creators) {\n                return (yield Promise.all(Array.from(Array(mpl_core_1.config.maxCreatorLimit).keys()).reduce((prev, i) => [\n                    ...prev,\n                    ...filters.creators.map((pubkey) => MetadataProgram_1.MetadataProgram.getProgramAccounts(connection, {\n                        filters: [\n                            ...baseFilters,\n                            {\n                                memcmp: {\n                                    offset: (0, exports.computeCreatorOffset)(i),\n                                    bytes: new web3_js_1.PublicKey(pubkey).toBase58(),\n                                },\n                            },\n                        ],\n                    })),\n                ], [])))\n                    .flat()\n                    .map((account) => Metadata.from(account));\n            }\n            else {\n                return (yield MetadataProgram_1.MetadataProgram.getProgramAccounts(connection, { filters: baseFilters })).map((account) => Metadata.from(account));\n            }\n        });\n    }\n    static findByOwner(connection, owner) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accounts = yield mpl_core_1.TokenAccount.getTokenAccountsByOwner(connection, owner);\n            const accountMap = new Map(accounts.map(({ data }) => [data.mint.toString(), data]));\n            const allMetadata = yield Metadata.findMany(connection);\n            return allMetadata.filter((metadata) => {\n                var _a, _b;\n                return accountMap.has(metadata.data.mint) &&\n                    (((_b = (_a = accountMap === null || accountMap === void 0 ? void 0 : accountMap.get(metadata.data.mint)) === null || _a === void 0 ? void 0 : _a.amount) === null || _b === void 0 ? void 0 : _b.toNumber()) || 0) > 0;\n            });\n        });\n    }\n    static findByOwnerV2(connection, owner) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accounts = yield mpl_core_1.TokenAccount.getTokenAccountsByOwner(connection, owner);\n            const accountsWithAmount = accounts\n                .map(({ data }) => data)\n                .filter(({ amount }) => (amount === null || amount === void 0 ? void 0 : amount.toNumber()) > 0);\n            return (yield Promise.all(accountsWithAmount.map(({ mint }) => Metadata.findMany(connection, { mint })))).flat();\n        });\n    }\n    static findDataByOwner(connection, owner) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const accounts = yield mpl_core_1.TokenAccount.getTokenAccountsByOwner(connection, owner);\n            const metadataPdaLookups = accounts.reduce((memo, { data }) => {\n                var _a;\n                return ((_a = data.amount) === null || _a === void 0 ? void 0 : _a.eq(new bn_js_1.default(1))) ? [...memo, Metadata.getPDA(data.mint)] : memo;\n            }, []);\n            const metadataAddresses = yield Promise.all(metadataPdaLookups);\n            const tokenInfo = yield mpl_core_1.Account.getInfos(connection, metadataAddresses);\n            return Array.from(tokenInfo.values()).map((m) => MetadataData.deserialize(m.data));\n        });\n    }\n    static getEdition(connection, mint) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const pda = yield Edition_1.Edition.getPDA(mint);\n            const info = yield mpl_core_1.Account.getInfo(connection, pda);\n            const key = info === null || info === void 0 ? void 0 : info.data[0];\n            switch (key) {\n                case constants_1.MetadataKey.EditionV1:\n                    return new Edition_1.Edition(pda, info);\n                case constants_1.MetadataKey.MasterEditionV1:\n                case constants_1.MetadataKey.MasterEditionV2:\n                    return new MasterEdition_1.MasterEdition(pda, info);\n                default:\n                    return;\n            }\n        });\n    }\n}\nexports.Metadata = Metadata;\nexports.MAX_NAME_LENGTH = 32;\nexports.MAX_SYMBOL_LENGTH = 10;\nexports.MAX_URI_LENGTH = 200;\nexports.MAX_CREATOR_LEN = 32 + 1 + 1;\nconst computeCreatorOffset = (index) => {\n    return (1 +\n        32 +\n        32 +\n        4 +\n        exports.MAX_NAME_LENGTH +\n        4 +\n        exports.MAX_URI_LENGTH +\n        4 +\n        exports.MAX_SYMBOL_LENGTH +\n        2 +\n        1 +\n        4 +\n        index * exports.MAX_CREATOR_LEN);\n};\nexports.computeCreatorOffset = computeCreatorOffset;\n//# sourceMappingURL=Metadata.js.map"]},"metadata":{},"sourceType":"script"}