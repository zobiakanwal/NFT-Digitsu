{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\");\n\nvar _asyncToGenerator = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\asyncToGenerator.js\").default;\n\nvar _createClass = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\createClass.js\").default;\n\nvar _classCallCheck = require(\"C:\\\\Users\\\\AHSAN PC\\\\Desktop\\\\digitsu\\\\gamp\\\\js\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\classCallCheck.js\").default;\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.cancelBid = exports.getAuctionExtended = exports.getBidderPotKey = exports.placeBid = exports.setAuctionAuthority = exports.startAuctionWithResource = exports.createAuction = exports.decodeAuctionData = exports.AUCTION_SCHEMA = exports.CreateAuctionArgs = exports.WinnerLimit = exports.WinnerLimitType = exports.BidderPot = exports.BIDDER_POT_LEN = exports.BidderMetadata = exports.BIDDER_METADATA_LEN = exports.AuctionData = exports.AuctionDataExtended = exports.PriceFloor = exports.PriceFloorType = exports.BASE_AUCTION_DATA_SIZE = exports.decodeBidderMetadata = exports.BidderMetadataParser = exports.decodeAuctionDataExtended = exports.AuctionDataExtendedParser = exports.decodeBidderPot = exports.BidderPotParser = exports.decodeAuction = exports.AuctionParser = exports.BidState = exports.Bid = exports.BidStateType = exports.AuctionState = exports.MAX_AUCTION_DATA_EXTENDED_SIZE = exports.BIDDER_POT_TOKEN = exports.EXTENDED = exports.METADATA = exports.AUCTION_PREFIX = void 0;\n\nvar web3_js_1 = require(\"@solana/web3.js\");\n\nvar programIds_1 = require(\"../utils/programIds\");\n\nvar borsh_1 = require(\"borsh\");\n\nvar bn_js_1 = __importDefault(require(\"bn.js\"));\n\nvar moment_1 = __importDefault(require(\"moment\"));\n\nvar utils_1 = require(\"../utils\");\n\nexports.AUCTION_PREFIX = 'auction';\nexports.METADATA = 'metadata';\nexports.EXTENDED = 'extended';\nexports.BIDDER_POT_TOKEN = 'bidder_pot_token';\nexports.MAX_AUCTION_DATA_EXTENDED_SIZE = 8 + 9 + 2 + 9 + 33 + 158;\nvar AuctionState;\n\n(function (AuctionState) {\n  AuctionState[AuctionState[\"Created\"] = 0] = \"Created\";\n  AuctionState[AuctionState[\"Started\"] = 1] = \"Started\";\n  AuctionState[AuctionState[\"Ended\"] = 2] = \"Ended\";\n})(AuctionState = exports.AuctionState || (exports.AuctionState = {}));\n\nvar BidStateType;\n\n(function (BidStateType) {\n  BidStateType[BidStateType[\"EnglishAuction\"] = 0] = \"EnglishAuction\";\n  BidStateType[BidStateType[\"OpenEdition\"] = 1] = \"OpenEdition\";\n})(BidStateType = exports.BidStateType || (exports.BidStateType = {}));\n\nvar Bid = /*#__PURE__*/_createClass(function Bid(args) {\n  _classCallCheck(this, Bid);\n\n  this.key = args.key;\n  this.amount = args.amount;\n});\n\nexports.Bid = Bid;\n\nvar BidState = /*#__PURE__*/function () {\n  function BidState(args) {\n    _classCallCheck(this, BidState);\n\n    this.type = args.type;\n    this.bids = args.bids;\n    this.max = args.max;\n  }\n\n  _createClass(BidState, [{\n    key: \"getWinnerAt\",\n    value: function getWinnerAt(winnerIndex) {\n      var convertedIndex = this.bids.length - winnerIndex - 1;\n\n      if (convertedIndex >= 0 && convertedIndex < this.bids.length) {\n        return this.bids[convertedIndex].key;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"getAmountAt\",\n    value: function getAmountAt(winnerIndex) {\n      var convertedIndex = this.bids.length - winnerIndex - 1;\n\n      if (convertedIndex >= 0 && convertedIndex < this.bids.length) {\n        return this.bids[convertedIndex].amount;\n      } else {\n        return null;\n      }\n    }\n  }, {\n    key: \"getWinnerIndex\",\n    value: function getWinnerIndex(bidder) {\n      if (!this.bids) return null;\n      var index = this.bids.findIndex(function (b) {\n        return b.key === bidder;\n      }); // auction stores data in reverse order\n\n      if (index !== -1) {\n        var zeroBased = this.bids.length - index - 1;\n        return zeroBased < this.max.toNumber() ? zeroBased : null;\n      } else return null;\n    }\n  }]);\n\n  return BidState;\n}();\n\nexports.BidState = BidState;\n\nvar AuctionParser = function AuctionParser(pubkey, account) {\n  return {\n    pubkey: pubkey,\n    account: account,\n    info: (0, exports.decodeAuction)(account.data)\n  };\n};\n\nexports.AuctionParser = AuctionParser;\n\nvar decodeAuction = function decodeAuction(buffer) {\n  return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, AuctionData, buffer);\n};\n\nexports.decodeAuction = decodeAuction;\n\nvar BidderPotParser = function BidderPotParser(pubkey, account) {\n  return {\n    pubkey: pubkey,\n    account: account,\n    info: (0, exports.decodeBidderPot)(account.data)\n  };\n};\n\nexports.BidderPotParser = BidderPotParser;\n\nvar decodeBidderPot = function decodeBidderPot(buffer) {\n  return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, BidderPot, buffer);\n};\n\nexports.decodeBidderPot = decodeBidderPot;\n\nvar AuctionDataExtendedParser = function AuctionDataExtendedParser(pubkey, account) {\n  return {\n    pubkey: pubkey,\n    account: account,\n    info: (0, exports.decodeAuctionDataExtended)(account.data)\n  };\n};\n\nexports.AuctionDataExtendedParser = AuctionDataExtendedParser;\n\nvar decodeAuctionDataExtended = function decodeAuctionDataExtended(buffer) {\n  return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, AuctionDataExtended, buffer);\n};\n\nexports.decodeAuctionDataExtended = decodeAuctionDataExtended;\n\nvar BidderMetadataParser = function BidderMetadataParser(pubkey, account) {\n  return {\n    pubkey: pubkey,\n    account: account,\n    info: (0, exports.decodeBidderMetadata)(account.data)\n  };\n};\n\nexports.BidderMetadataParser = BidderMetadataParser;\n\nvar decodeBidderMetadata = function decodeBidderMetadata(buffer) {\n  return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, BidderMetadata, buffer);\n};\n\nexports.decodeBidderMetadata = decodeBidderMetadata;\nexports.BASE_AUCTION_DATA_SIZE = 32 + 32 + 32 + 9 + 9 + 9 + 9 + 1 + 32 + 1 + 8 + 8;\nvar PriceFloorType;\n\n(function (PriceFloorType) {\n  PriceFloorType[PriceFloorType[\"None\"] = 0] = \"None\";\n  PriceFloorType[PriceFloorType[\"Minimum\"] = 1] = \"Minimum\";\n  PriceFloorType[PriceFloorType[\"BlindedPrice\"] = 2] = \"BlindedPrice\";\n})(PriceFloorType = exports.PriceFloorType || (exports.PriceFloorType = {}));\n\nvar PriceFloor = /*#__PURE__*/_createClass(function PriceFloor(args) {\n  _classCallCheck(this, PriceFloor);\n\n  this.type = args.type;\n  this.hash = args.hash || new Uint8Array(32);\n\n  if (this.type === PriceFloorType.Minimum) {\n    if (args.minPrice) {\n      this.hash.set(args.minPrice.toArrayLike(Buffer, 'le', 8), 0);\n    } else {\n      this.minPrice = new bn_js_1.default((args.hash || new Uint8Array(0)).slice(0, 8), 'le');\n    }\n  }\n});\n\nexports.PriceFloor = PriceFloor;\n\nvar AuctionDataExtended = /*#__PURE__*/_createClass(function AuctionDataExtended(args) {\n  _classCallCheck(this, AuctionDataExtended);\n\n  this.totalUncancelledBids = args.totalUncancelledBids;\n  this.tickSize = args.tickSize;\n  this.gapTickSizePercentage = args.gapTickSizePercentage;\n  this.instantSalePrice = args.instantSalePrice;\n  this.name = args.name;\n});\n\nexports.AuctionDataExtended = AuctionDataExtended;\n\nvar AuctionData = /*#__PURE__*/function () {\n  function AuctionData(args) {\n    _classCallCheck(this, AuctionData);\n\n    this.authority = args.authority;\n    this.tokenMint = args.tokenMint;\n    this.lastBid = args.lastBid;\n    this.endedAt = args.endedAt;\n    this.endAuctionAt = args.endAuctionAt;\n    this.auctionGap = args.auctionGap;\n    this.priceFloor = args.priceFloor;\n    this.state = args.state;\n    this.bidState = args.bidState;\n  }\n\n  _createClass(AuctionData, [{\n    key: \"timeToEnd\",\n    value: function timeToEnd() {\n      var _a;\n\n      var now = (0, moment_1.default)().unix();\n      var ended = {\n        days: 0,\n        hours: 0,\n        minutes: 0,\n        seconds: 0\n      };\n      var endAt = ((_a = this.endedAt) === null || _a === void 0 ? void 0 : _a.toNumber()) || 0;\n\n      if (this.auctionGap && this.lastBid) {\n        endAt = Math.max(endAt, this.auctionGap.toNumber() + this.lastBid.toNumber());\n      }\n\n      var delta = endAt - now;\n      if (!endAt || delta <= 0) return ended;\n      var days = Math.floor(delta / 86400);\n      delta -= days * 86400;\n      var hours = Math.floor(delta / 3600) % 24;\n      delta -= hours * 3600;\n      var minutes = Math.floor(delta / 60) % 60;\n      delta -= minutes * 60;\n      var seconds = Math.floor(delta % 60);\n      return {\n        days: days,\n        hours: hours,\n        minutes: minutes,\n        seconds: seconds\n      };\n    }\n  }, {\n    key: \"ended\",\n    value: function ended() {\n      var now = (0, moment_1.default)().unix();\n      if (!this.endedAt) return false;\n      if (this.endedAt.toNumber() > now) return false;\n\n      if (this.endedAt.toNumber() < now) {\n        if (this.auctionGap && this.lastBid) {\n          var newEnding = this.auctionGap.toNumber() + this.lastBid.toNumber();\n          return newEnding < now;\n        } else return true;\n      }\n    }\n  }]);\n\n  return AuctionData;\n}();\n\nexports.AuctionData = AuctionData;\nexports.BIDDER_METADATA_LEN = 32 + 32 + 8 + 8 + 1;\n\nvar BidderMetadata = /*#__PURE__*/_createClass(function BidderMetadata(args) {\n  _classCallCheck(this, BidderMetadata);\n\n  this.bidderPubkey = args.bidderPubkey;\n  this.auctionPubkey = args.auctionPubkey;\n  this.lastBid = args.lastBid;\n  this.lastBidTimestamp = args.lastBidTimestamp;\n  this.cancelled = args.cancelled;\n});\n\nexports.BidderMetadata = BidderMetadata;\nexports.BIDDER_POT_LEN = 32 + 32 + 32 + 1;\n\nvar BidderPot = /*#__PURE__*/_createClass(function BidderPot(args) {\n  _classCallCheck(this, BidderPot);\n\n  this.bidderPot = args.bidderPot;\n  this.bidderAct = args.bidderAct;\n  this.auctionAct = args.auctionAct;\n  this.emptied = args.emptied;\n});\n\nexports.BidderPot = BidderPot;\nvar WinnerLimitType;\n\n(function (WinnerLimitType) {\n  WinnerLimitType[WinnerLimitType[\"Unlimited\"] = 0] = \"Unlimited\";\n  WinnerLimitType[WinnerLimitType[\"Capped\"] = 1] = \"Capped\";\n})(WinnerLimitType = exports.WinnerLimitType || (exports.WinnerLimitType = {}));\n\nvar WinnerLimit = /*#__PURE__*/_createClass(function WinnerLimit(args) {\n  _classCallCheck(this, WinnerLimit);\n\n  this.type = args.type;\n  this.usize = args.usize;\n});\n\nexports.WinnerLimit = WinnerLimit;\n\nvar CreateAuctionArgs = /*#__PURE__*/_createClass(function CreateAuctionArgs(args) {\n  _classCallCheck(this, CreateAuctionArgs);\n\n  this.instruction = 7;\n  this.winners = args.winners;\n  this.endAuctionAt = args.endAuctionAt;\n  this.auctionGap = args.auctionGap;\n  this.tokenMint = args.tokenMint;\n  this.authority = args.authority;\n  this.resource = args.resource;\n  this.priceFloor = args.priceFloor;\n  this.tickSize = args.tickSize;\n  this.gapTickSizePercentage = args.gapTickSizePercentage;\n  this.name = args.name;\n  this.instantSalePrice = args.instantSalePrice;\n});\n\nexports.CreateAuctionArgs = CreateAuctionArgs;\n\nvar StartAuctionArgs = /*#__PURE__*/_createClass(function StartAuctionArgs(args) {\n  _classCallCheck(this, StartAuctionArgs);\n\n  this.instruction = 4;\n  this.resource = args.resource;\n});\n\nvar PlaceBidArgs = /*#__PURE__*/_createClass(function PlaceBidArgs(args) {\n  _classCallCheck(this, PlaceBidArgs);\n\n  this.instruction = 6;\n  this.resource = args.resource;\n  this.amount = args.amount;\n});\n\nvar CancelBidArgs = /*#__PURE__*/_createClass(function CancelBidArgs(args) {\n  _classCallCheck(this, CancelBidArgs);\n\n  this.instruction = 0;\n  this.resource = args.resource;\n});\n\nvar SetAuthorityArgs = /*#__PURE__*/_createClass(function SetAuthorityArgs() {\n  _classCallCheck(this, SetAuthorityArgs);\n\n  this.instruction = 5;\n});\n\nexports.AUCTION_SCHEMA = new Map([[CreateAuctionArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['winners', WinnerLimit], ['endAuctionAt', {\n    kind: 'option',\n    type: 'u64'\n  }], ['auctionGap', {\n    kind: 'option',\n    type: 'u64'\n  }], ['tokenMint', 'pubkeyAsString'], ['authority', 'pubkeyAsString'], ['resource', 'pubkeyAsString'], ['priceFloor', PriceFloor], ['tickSize', {\n    kind: 'option',\n    type: 'u64'\n  }], ['gapTickSizePercentage', {\n    kind: 'option',\n    type: 'u8'\n  }], ['instantSalePrice', {\n    kind: 'option',\n    type: 'u64'\n  }], ['name', {\n    kind: 'option',\n    type: [32]\n  }]]\n}], [WinnerLimit, {\n  kind: 'struct',\n  fields: [['type', 'u8'], ['usize', 'u64']]\n}], [StartAuctionArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['resource', 'pubkeyAsString']]\n}], [PlaceBidArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['amount', 'u64'], ['resource', 'pubkeyAsString']]\n}], [CancelBidArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8'], ['resource', 'pubkeyAsString']]\n}], [SetAuthorityArgs, {\n  kind: 'struct',\n  fields: [['instruction', 'u8']]\n}], [AuctionData, {\n  kind: 'struct',\n  fields: [['authority', 'pubkeyAsString'], ['tokenMint', 'pubkeyAsString'], ['lastBid', {\n    kind: 'option',\n    type: 'u64'\n  }], ['endedAt', {\n    kind: 'option',\n    type: 'u64'\n  }], ['endAuctionAt', {\n    kind: 'option',\n    type: 'u64'\n  }], ['auctionGap', {\n    kind: 'option',\n    type: 'u64'\n  }], ['priceFloor', PriceFloor], ['state', 'u8'], ['bidState', BidState]]\n}], [AuctionDataExtended, {\n  kind: 'struct',\n  fields: [['totalUncancelledBids', 'u64'], ['tickSize', {\n    kind: 'option',\n    type: 'u64'\n  }], ['gapTickSizePercentage', {\n    kind: 'option',\n    type: 'u8'\n  }], ['instantSalePrice', {\n    kind: 'option',\n    type: 'u64'\n  }], ['name', {\n    kind: 'option',\n    type: [32]\n  }]]\n}], [PriceFloor, {\n  kind: 'struct',\n  fields: [['type', 'u8'], ['hash', [32]]]\n}], [BidState, {\n  kind: 'struct',\n  fields: [['type', 'u8'], ['bids', [Bid]], ['max', 'u64']]\n}], [Bid, {\n  kind: 'struct',\n  fields: [['key', 'pubkeyAsString'], ['amount', 'u64']]\n}], [BidderMetadata, {\n  kind: 'struct',\n  fields: [['bidderPubkey', 'pubkeyAsString'], ['auctionPubkey', 'pubkeyAsString'], ['lastBid', 'u64'], ['lastBidTimestamp', 'u64'], ['cancelled', 'u8']]\n}], [BidderPot, {\n  kind: 'struct',\n  fields: [['bidderPot', 'pubkeyAsString'], ['bidderAct', 'pubkeyAsString'], ['auctionAct', 'pubkeyAsString'], ['emptied', 'u8']]\n}]]);\n\nvar decodeAuctionData = function decodeAuctionData(buffer) {\n  return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, AuctionData, buffer);\n};\n\nexports.decodeAuctionData = decodeAuctionData;\n\nfunction createAuction(_x, _x2, _x3) {\n  return _createAuction.apply(this, arguments);\n}\n\nfunction _createAuction() {\n  _createAuction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(settings, creator, instructions) {\n    var auctionProgramId, data, auctionKey, keys;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            auctionProgramId = (0, programIds_1.programIds)().auction;\n            data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, settings));\n            _context.next = 4;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(settings.resource).toBuffer()], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 4:\n            auctionKey = _context.sent[0];\n            _context.t0 = {\n              pubkey: (0, utils_1.toPublicKey)(creator),\n              isSigner: true,\n              isWritable: true\n            };\n            _context.t1 = {\n              pubkey: (0, utils_1.toPublicKey)(auctionKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context.t2 = (0, utils_1.toPublicKey);\n            _context.next = 10;\n            return getAuctionExtended({\n              auctionProgramId: auctionProgramId,\n              resource: settings.resource\n            });\n\n          case 10:\n            _context.t3 = _context.sent;\n            _context.t4 = (0, _context.t2)(_context.t3);\n            _context.t5 = {\n              pubkey: _context.t4,\n              isSigner: false,\n              isWritable: true\n            };\n            _context.t6 = {\n              pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n              isSigner: false,\n              isWritable: false\n            };\n            _context.t7 = {\n              pubkey: web3_js_1.SystemProgram.programId,\n              isSigner: false,\n              isWritable: false\n            };\n            keys = [_context.t0, _context.t1, _context.t5, _context.t6, _context.t7];\n            instructions.push(new web3_js_1.TransactionInstruction({\n              keys: keys,\n              programId: (0, utils_1.toPublicKey)(auctionProgramId),\n              data: data\n            }));\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _createAuction.apply(this, arguments);\n}\n\nexports.createAuction = createAuction;\n\nfunction startAuctionWithResource(_x4, _x5, _x6) {\n  return _startAuctionWithResource.apply(this, arguments);\n}\n\nfunction _startAuctionWithResource() {\n  _startAuctionWithResource = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(resource, creator, instructions) {\n    var auctionProgramId, data, auctionKey, keys;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            auctionProgramId = (0, programIds_1.programIds)().auction;\n            data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new StartAuctionArgs({\n              resource: resource\n            })));\n            _context2.next = 4;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(resource).toBuffer()], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 4:\n            auctionKey = _context2.sent[0];\n            keys = [{\n              pubkey: (0, utils_1.toPublicKey)(creator),\n              isSigner: false,\n              isWritable: true\n            }, {\n              pubkey: (0, utils_1.toPublicKey)(auctionKey),\n              isSigner: false,\n              isWritable: true\n            }, {\n              pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\n              isSigner: false,\n              isWritable: false\n            }];\n            instructions.push(new web3_js_1.TransactionInstruction({\n              keys: keys,\n              programId: (0, utils_1.toPublicKey)(auctionProgramId),\n              data: data\n            }));\n\n          case 7:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _startAuctionWithResource.apply(this, arguments);\n}\n\nexports.startAuctionWithResource = startAuctionWithResource;\n\nfunction setAuctionAuthority(_x7, _x8, _x9, _x10) {\n  return _setAuctionAuthority.apply(this, arguments);\n}\n\nfunction _setAuctionAuthority() {\n  _setAuctionAuthority = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(auction, currentAuthority, newAuthority, instructions) {\n    var auctionProgramId, data, keys;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            auctionProgramId = (0, programIds_1.programIds)().auction;\n            data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new SetAuthorityArgs()));\n            keys = [{\n              pubkey: (0, utils_1.toPublicKey)(auction),\n              isSigner: false,\n              isWritable: true\n            }, {\n              pubkey: (0, utils_1.toPublicKey)(currentAuthority),\n              isSigner: true,\n              isWritable: false\n            }, {\n              pubkey: (0, utils_1.toPublicKey)(newAuthority),\n              isSigner: false,\n              isWritable: false\n            }];\n            instructions.push(new web3_js_1.TransactionInstruction({\n              keys: keys,\n              programId: (0, utils_1.toPublicKey)(auctionProgramId),\n              data: data\n            }));\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _setAuctionAuthority.apply(this, arguments);\n}\n\nexports.setAuctionAuthority = setAuctionAuthority;\n\nfunction placeBid(_x11, _x12, _x13, _x14, _x15, _x16, _x17, _x18, _x19) {\n  return _placeBid.apply(this, arguments);\n}\n\nfunction _placeBid() {\n  _placeBid = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(bidderPubkey, bidderTokenPubkey, bidderPotTokenPubkey, tokenMintPubkey, transferAuthority, payer, resource, amount, instructions) {\n    var auctionProgramId, data, auctionKey, bidderPotKey, bidderMetaKey, bidderPotTokenAccount, keys;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            auctionProgramId = (0, programIds_1.programIds)().auction;\n            data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new PlaceBidArgs({\n              resource: resource,\n              amount: amount\n            })));\n            _context4.next = 4;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(resource).toBuffer()], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 4:\n            auctionKey = _context4.sent[0];\n            _context4.next = 7;\n            return getBidderPotKey({\n              auctionProgramId: auctionProgramId,\n              auctionKey: auctionKey,\n              bidderPubkey: bidderPubkey\n            });\n\n          case 7:\n            bidderPotKey = _context4.sent;\n            _context4.next = 10;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(auctionKey).toBuffer(), (0, utils_1.toPublicKey)(bidderPubkey).toBuffer(), Buffer.from('metadata')], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 10:\n            bidderMetaKey = _context4.sent[0];\n\n            if (bidderPotTokenPubkey) {\n              _context4.next = 19;\n              break;\n            }\n\n            _context4.t0 = (0, utils_1.toPublicKey);\n            _context4.next = 15;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(bidderPotKey).toBuffer(), Buffer.from(exports.BIDDER_POT_TOKEN)], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 15:\n            _context4.t1 = _context4.sent[0];\n            bidderPotTokenAccount = (0, _context4.t0)(_context4.t1);\n            _context4.next = 20;\n            break;\n\n          case 19:\n            bidderPotTokenAccount = (0, utils_1.toPublicKey)(bidderPotTokenPubkey);\n\n          case 20:\n            _context4.t2 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderPubkey),\n              isSigner: true,\n              isWritable: false\n            };\n            _context4.t3 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderTokenPubkey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t4 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderPotKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t5 = {\n              pubkey: bidderPotTokenAccount,\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t6 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderMetaKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t7 = {\n              pubkey: (0, utils_1.toPublicKey)(auctionKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t8 = (0, utils_1.toPublicKey);\n            _context4.next = 29;\n            return getAuctionExtended({\n              auctionProgramId: auctionProgramId,\n              resource: resource\n            });\n\n          case 29:\n            _context4.t9 = _context4.sent;\n            _context4.t10 = (0, _context4.t8)(_context4.t9);\n            _context4.t11 = {\n              pubkey: _context4.t10,\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t12 = {\n              pubkey: (0, utils_1.toPublicKey)(tokenMintPubkey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context4.t13 = {\n              pubkey: (0, utils_1.toPublicKey)(transferAuthority),\n              isSigner: true,\n              isWritable: false\n            };\n            _context4.t14 = {\n              pubkey: (0, utils_1.toPublicKey)(payer),\n              isSigner: true,\n              isWritable: false\n            };\n            _context4.t15 = {\n              pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\n              isSigner: false,\n              isWritable: false\n            };\n            _context4.t16 = {\n              pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n              isSigner: false,\n              isWritable: false\n            };\n            _context4.t17 = {\n              pubkey: web3_js_1.SystemProgram.programId,\n              isSigner: false,\n              isWritable: false\n            };\n            _context4.t18 = {\n              pubkey: (0, programIds_1.programIds)().token,\n              isSigner: false,\n              isWritable: false\n            };\n            keys = [_context4.t2, _context4.t3, _context4.t4, _context4.t5, _context4.t6, _context4.t7, _context4.t11, _context4.t12, _context4.t13, _context4.t14, _context4.t15, _context4.t16, _context4.t17, _context4.t18];\n            instructions.push(new web3_js_1.TransactionInstruction({\n              keys: keys,\n              programId: (0, utils_1.toPublicKey)(auctionProgramId),\n              data: data\n            }));\n            return _context4.abrupt(\"return\", {\n              amount: amount\n            });\n\n          case 42:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _placeBid.apply(this, arguments);\n}\n\nexports.placeBid = placeBid;\n\nfunction getBidderPotKey(_x20) {\n  return _getBidderPotKey.apply(this, arguments);\n}\n\nfunction _getBidderPotKey() {\n  _getBidderPotKey = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(_ref) {\n    var auctionProgramId, auctionKey, bidderPubkey;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            auctionProgramId = _ref.auctionProgramId, auctionKey = _ref.auctionKey, bidderPubkey = _ref.bidderPubkey;\n            _context5.next = 3;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(auctionKey).toBuffer(), (0, utils_1.toPublicKey)(bidderPubkey).toBuffer()], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 3:\n            return _context5.abrupt(\"return\", _context5.sent[0]);\n\n          case 4:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _getBidderPotKey.apply(this, arguments);\n}\n\nexports.getBidderPotKey = getBidderPotKey;\n\nfunction getAuctionExtended(_x21) {\n  return _getAuctionExtended.apply(this, arguments);\n}\n\nfunction _getAuctionExtended() {\n  _getAuctionExtended = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(_ref2) {\n    var auctionProgramId, resource;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            auctionProgramId = _ref2.auctionProgramId, resource = _ref2.resource;\n            _context6.next = 3;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(resource).toBuffer(), Buffer.from(exports.EXTENDED)], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 3:\n            return _context6.abrupt(\"return\", _context6.sent[0]);\n\n          case 4:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _getAuctionExtended.apply(this, arguments);\n}\n\nexports.getAuctionExtended = getAuctionExtended;\n\nfunction cancelBid(_x22, _x23, _x24, _x25, _x26, _x27) {\n  return _cancelBid.apply(this, arguments);\n}\n\nfunction _cancelBid() {\n  _cancelBid = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(bidderPubkey, bidderTokenPubkey, bidderPotTokenPubkey, tokenMintPubkey, resource, instructions) {\n    var auctionProgramId, data, auctionKey, bidderPotKey, bidderMetaKey, keys;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            auctionProgramId = (0, programIds_1.programIds)().auction;\n            data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new CancelBidArgs({\n              resource: resource\n            })));\n            _context7.next = 4;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(resource).toBuffer()], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 4:\n            auctionKey = _context7.sent[0];\n            _context7.next = 7;\n            return getBidderPotKey({\n              auctionProgramId: auctionProgramId,\n              auctionKey: auctionKey,\n              bidderPubkey: bidderPubkey\n            });\n\n          case 7:\n            bidderPotKey = _context7.sent;\n            _context7.next = 10;\n            return (0, utils_1.findProgramAddress)([Buffer.from(exports.AUCTION_PREFIX), (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(), (0, utils_1.toPublicKey)(auctionKey).toBuffer(), (0, utils_1.toPublicKey)(bidderPubkey).toBuffer(), Buffer.from('metadata')], (0, utils_1.toPublicKey)(auctionProgramId));\n\n          case 10:\n            bidderMetaKey = _context7.sent[0];\n            _context7.t0 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderPubkey),\n              isSigner: true,\n              isWritable: false\n            };\n            _context7.t1 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderTokenPubkey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t2 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderPotKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t3 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderPotTokenPubkey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t4 = {\n              pubkey: (0, utils_1.toPublicKey)(bidderMetaKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t5 = {\n              pubkey: (0, utils_1.toPublicKey)(auctionKey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t6 = (0, utils_1.toPublicKey);\n            _context7.next = 20;\n            return getAuctionExtended({\n              auctionProgramId: auctionProgramId,\n              resource: resource\n            });\n\n          case 20:\n            _context7.t7 = _context7.sent;\n            _context7.t8 = (0, _context7.t6)(_context7.t7);\n            _context7.t9 = {\n              pubkey: _context7.t8,\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t10 = {\n              pubkey: (0, utils_1.toPublicKey)(tokenMintPubkey),\n              isSigner: false,\n              isWritable: true\n            };\n            _context7.t11 = {\n              pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\n              isSigner: false,\n              isWritable: false\n            };\n            _context7.t12 = {\n              pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\n              isSigner: false,\n              isWritable: false\n            };\n            _context7.t13 = {\n              pubkey: web3_js_1.SystemProgram.programId,\n              isSigner: false,\n              isWritable: false\n            };\n            _context7.t14 = {\n              pubkey: (0, programIds_1.programIds)().token,\n              isSigner: false,\n              isWritable: false\n            };\n            keys = [_context7.t0, _context7.t1, _context7.t2, _context7.t3, _context7.t4, _context7.t5, _context7.t9, _context7.t10, _context7.t11, _context7.t12, _context7.t13, _context7.t14];\n            instructions.push(new web3_js_1.TransactionInstruction({\n              keys: keys,\n              programId: (0, utils_1.toPublicKey)(auctionProgramId),\n              data: data\n            }));\n\n          case 30:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _cancelBid.apply(this, arguments);\n}\n\nexports.cancelBid = cancelBid;","map":{"version":3,"sources":["../../../src/actions/auction.ts"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __importDefault = (this && this.__importDefault) || function (mod) {\r\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.cancelBid = exports.getAuctionExtended = exports.getBidderPotKey = exports.placeBid = exports.setAuctionAuthority = exports.startAuctionWithResource = exports.createAuction = exports.decodeAuctionData = exports.AUCTION_SCHEMA = exports.CreateAuctionArgs = exports.WinnerLimit = exports.WinnerLimitType = exports.BidderPot = exports.BIDDER_POT_LEN = exports.BidderMetadata = exports.BIDDER_METADATA_LEN = exports.AuctionData = exports.AuctionDataExtended = exports.PriceFloor = exports.PriceFloorType = exports.BASE_AUCTION_DATA_SIZE = exports.decodeBidderMetadata = exports.BidderMetadataParser = exports.decodeAuctionDataExtended = exports.AuctionDataExtendedParser = exports.decodeBidderPot = exports.BidderPotParser = exports.decodeAuction = exports.AuctionParser = exports.BidState = exports.Bid = exports.BidStateType = exports.AuctionState = exports.MAX_AUCTION_DATA_EXTENDED_SIZE = exports.BIDDER_POT_TOKEN = exports.EXTENDED = exports.METADATA = exports.AUCTION_PREFIX = void 0;\r\nconst web3_js_1 = require(\"@solana/web3.js\");\r\nconst programIds_1 = require(\"../utils/programIds\");\r\nconst borsh_1 = require(\"borsh\");\r\nconst bn_js_1 = __importDefault(require(\"bn.js\"));\r\nconst moment_1 = __importDefault(require(\"moment\"));\r\nconst utils_1 = require(\"../utils\");\r\nexports.AUCTION_PREFIX = 'auction';\r\nexports.METADATA = 'metadata';\r\nexports.EXTENDED = 'extended';\r\nexports.BIDDER_POT_TOKEN = 'bidder_pot_token';\r\nexports.MAX_AUCTION_DATA_EXTENDED_SIZE = 8 + 9 + 2 + 9 + 33 + 158;\r\nvar AuctionState;\r\n(function (AuctionState) {\r\n    AuctionState[AuctionState[\"Created\"] = 0] = \"Created\";\r\n    AuctionState[AuctionState[\"Started\"] = 1] = \"Started\";\r\n    AuctionState[AuctionState[\"Ended\"] = 2] = \"Ended\";\r\n})(AuctionState = exports.AuctionState || (exports.AuctionState = {}));\r\nvar BidStateType;\r\n(function (BidStateType) {\r\n    BidStateType[BidStateType[\"EnglishAuction\"] = 0] = \"EnglishAuction\";\r\n    BidStateType[BidStateType[\"OpenEdition\"] = 1] = \"OpenEdition\";\r\n})(BidStateType = exports.BidStateType || (exports.BidStateType = {}));\r\nclass Bid {\r\n    constructor(args) {\r\n        this.key = args.key;\r\n        this.amount = args.amount;\r\n    }\r\n}\r\nexports.Bid = Bid;\r\nclass BidState {\r\n    constructor(args) {\r\n        this.type = args.type;\r\n        this.bids = args.bids;\r\n        this.max = args.max;\r\n    }\r\n    getWinnerAt(winnerIndex) {\r\n        const convertedIndex = this.bids.length - winnerIndex - 1;\r\n        if (convertedIndex >= 0 && convertedIndex < this.bids.length) {\r\n            return this.bids[convertedIndex].key;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getAmountAt(winnerIndex) {\r\n        const convertedIndex = this.bids.length - winnerIndex - 1;\r\n        if (convertedIndex >= 0 && convertedIndex < this.bids.length) {\r\n            return this.bids[convertedIndex].amount;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n    getWinnerIndex(bidder) {\r\n        if (!this.bids)\r\n            return null;\r\n        const index = this.bids.findIndex(b => b.key === bidder);\r\n        // auction stores data in reverse order\r\n        if (index !== -1) {\r\n            const zeroBased = this.bids.length - index - 1;\r\n            return zeroBased < this.max.toNumber() ? zeroBased : null;\r\n        }\r\n        else\r\n            return null;\r\n    }\r\n}\r\nexports.BidState = BidState;\r\nconst AuctionParser = (pubkey, account) => ({\r\n    pubkey,\r\n    account,\r\n    info: (0, exports.decodeAuction)(account.data),\r\n});\r\nexports.AuctionParser = AuctionParser;\r\nconst decodeAuction = (buffer) => {\r\n    return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, AuctionData, buffer);\r\n};\r\nexports.decodeAuction = decodeAuction;\r\nconst BidderPotParser = (pubkey, account) => ({\r\n    pubkey,\r\n    account,\r\n    info: (0, exports.decodeBidderPot)(account.data),\r\n});\r\nexports.BidderPotParser = BidderPotParser;\r\nconst decodeBidderPot = (buffer) => {\r\n    return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, BidderPot, buffer);\r\n};\r\nexports.decodeBidderPot = decodeBidderPot;\r\nconst AuctionDataExtendedParser = (pubkey, account) => ({\r\n    pubkey,\r\n    account,\r\n    info: (0, exports.decodeAuctionDataExtended)(account.data),\r\n});\r\nexports.AuctionDataExtendedParser = AuctionDataExtendedParser;\r\nconst decodeAuctionDataExtended = (buffer) => {\r\n    return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, AuctionDataExtended, buffer);\r\n};\r\nexports.decodeAuctionDataExtended = decodeAuctionDataExtended;\r\nconst BidderMetadataParser = (pubkey, account) => ({\r\n    pubkey,\r\n    account,\r\n    info: (0, exports.decodeBidderMetadata)(account.data),\r\n});\r\nexports.BidderMetadataParser = BidderMetadataParser;\r\nconst decodeBidderMetadata = (buffer) => {\r\n    return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, BidderMetadata, buffer);\r\n};\r\nexports.decodeBidderMetadata = decodeBidderMetadata;\r\nexports.BASE_AUCTION_DATA_SIZE = 32 + 32 + 32 + 9 + 9 + 9 + 9 + 1 + 32 + 1 + 8 + 8;\r\nvar PriceFloorType;\r\n(function (PriceFloorType) {\r\n    PriceFloorType[PriceFloorType[\"None\"] = 0] = \"None\";\r\n    PriceFloorType[PriceFloorType[\"Minimum\"] = 1] = \"Minimum\";\r\n    PriceFloorType[PriceFloorType[\"BlindedPrice\"] = 2] = \"BlindedPrice\";\r\n})(PriceFloorType = exports.PriceFloorType || (exports.PriceFloorType = {}));\r\nclass PriceFloor {\r\n    constructor(args) {\r\n        this.type = args.type;\r\n        this.hash = args.hash || new Uint8Array(32);\r\n        if (this.type === PriceFloorType.Minimum) {\r\n            if (args.minPrice) {\r\n                this.hash.set(args.minPrice.toArrayLike(Buffer, 'le', 8), 0);\r\n            }\r\n            else {\r\n                this.minPrice = new bn_js_1.default((args.hash || new Uint8Array(0)).slice(0, 8), 'le');\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.PriceFloor = PriceFloor;\r\nclass AuctionDataExtended {\r\n    constructor(args) {\r\n        this.totalUncancelledBids = args.totalUncancelledBids;\r\n        this.tickSize = args.tickSize;\r\n        this.gapTickSizePercentage = args.gapTickSizePercentage;\r\n        this.instantSalePrice = args.instantSalePrice;\r\n        this.name = args.name;\r\n    }\r\n}\r\nexports.AuctionDataExtended = AuctionDataExtended;\r\nclass AuctionData {\r\n    constructor(args) {\r\n        this.authority = args.authority;\r\n        this.tokenMint = args.tokenMint;\r\n        this.lastBid = args.lastBid;\r\n        this.endedAt = args.endedAt;\r\n        this.endAuctionAt = args.endAuctionAt;\r\n        this.auctionGap = args.auctionGap;\r\n        this.priceFloor = args.priceFloor;\r\n        this.state = args.state;\r\n        this.bidState = args.bidState;\r\n    }\r\n    timeToEnd() {\r\n        var _a;\r\n        const now = (0, moment_1.default)().unix();\r\n        const ended = { days: 0, hours: 0, minutes: 0, seconds: 0 };\r\n        let endAt = ((_a = this.endedAt) === null || _a === void 0 ? void 0 : _a.toNumber()) || 0;\r\n        if (this.auctionGap && this.lastBid) {\r\n            endAt = Math.max(endAt, this.auctionGap.toNumber() + this.lastBid.toNumber());\r\n        }\r\n        let delta = endAt - now;\r\n        if (!endAt || delta <= 0)\r\n            return ended;\r\n        const days = Math.floor(delta / 86400);\r\n        delta -= days * 86400;\r\n        const hours = Math.floor(delta / 3600) % 24;\r\n        delta -= hours * 3600;\r\n        const minutes = Math.floor(delta / 60) % 60;\r\n        delta -= minutes * 60;\r\n        const seconds = Math.floor(delta % 60);\r\n        return { days, hours, minutes, seconds };\r\n    }\r\n    ended() {\r\n        const now = (0, moment_1.default)().unix();\r\n        if (!this.endedAt)\r\n            return false;\r\n        if (this.endedAt.toNumber() > now)\r\n            return false;\r\n        if (this.endedAt.toNumber() < now) {\r\n            if (this.auctionGap && this.lastBid) {\r\n                const newEnding = this.auctionGap.toNumber() + this.lastBid.toNumber();\r\n                return newEnding < now;\r\n            }\r\n            else\r\n                return true;\r\n        }\r\n    }\r\n}\r\nexports.AuctionData = AuctionData;\r\nexports.BIDDER_METADATA_LEN = 32 + 32 + 8 + 8 + 1;\r\nclass BidderMetadata {\r\n    constructor(args) {\r\n        this.bidderPubkey = args.bidderPubkey;\r\n        this.auctionPubkey = args.auctionPubkey;\r\n        this.lastBid = args.lastBid;\r\n        this.lastBidTimestamp = args.lastBidTimestamp;\r\n        this.cancelled = args.cancelled;\r\n    }\r\n}\r\nexports.BidderMetadata = BidderMetadata;\r\nexports.BIDDER_POT_LEN = 32 + 32 + 32 + 1;\r\nclass BidderPot {\r\n    constructor(args) {\r\n        this.bidderPot = args.bidderPot;\r\n        this.bidderAct = args.bidderAct;\r\n        this.auctionAct = args.auctionAct;\r\n        this.emptied = args.emptied;\r\n    }\r\n}\r\nexports.BidderPot = BidderPot;\r\nvar WinnerLimitType;\r\n(function (WinnerLimitType) {\r\n    WinnerLimitType[WinnerLimitType[\"Unlimited\"] = 0] = \"Unlimited\";\r\n    WinnerLimitType[WinnerLimitType[\"Capped\"] = 1] = \"Capped\";\r\n})(WinnerLimitType = exports.WinnerLimitType || (exports.WinnerLimitType = {}));\r\nclass WinnerLimit {\r\n    constructor(args) {\r\n        this.type = args.type;\r\n        this.usize = args.usize;\r\n    }\r\n}\r\nexports.WinnerLimit = WinnerLimit;\r\nclass CreateAuctionArgs {\r\n    constructor(args) {\r\n        this.instruction = 7;\r\n        this.winners = args.winners;\r\n        this.endAuctionAt = args.endAuctionAt;\r\n        this.auctionGap = args.auctionGap;\r\n        this.tokenMint = args.tokenMint;\r\n        this.authority = args.authority;\r\n        this.resource = args.resource;\r\n        this.priceFloor = args.priceFloor;\r\n        this.tickSize = args.tickSize;\r\n        this.gapTickSizePercentage = args.gapTickSizePercentage;\r\n        this.name = args.name;\r\n        this.instantSalePrice = args.instantSalePrice;\r\n    }\r\n}\r\nexports.CreateAuctionArgs = CreateAuctionArgs;\r\nclass StartAuctionArgs {\r\n    constructor(args) {\r\n        this.instruction = 4;\r\n        this.resource = args.resource;\r\n    }\r\n}\r\nclass PlaceBidArgs {\r\n    constructor(args) {\r\n        this.instruction = 6;\r\n        this.resource = args.resource;\r\n        this.amount = args.amount;\r\n    }\r\n}\r\nclass CancelBidArgs {\r\n    constructor(args) {\r\n        this.instruction = 0;\r\n        this.resource = args.resource;\r\n    }\r\n}\r\nclass SetAuthorityArgs {\r\n    constructor() {\r\n        this.instruction = 5;\r\n    }\r\n}\r\nexports.AUCTION_SCHEMA = new Map([\r\n    [\r\n        CreateAuctionArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['winners', WinnerLimit],\r\n                ['endAuctionAt', { kind: 'option', type: 'u64' }],\r\n                ['auctionGap', { kind: 'option', type: 'u64' }],\r\n                ['tokenMint', 'pubkeyAsString'],\r\n                ['authority', 'pubkeyAsString'],\r\n                ['resource', 'pubkeyAsString'],\r\n                ['priceFloor', PriceFloor],\r\n                ['tickSize', { kind: 'option', type: 'u64' }],\r\n                ['gapTickSizePercentage', { kind: 'option', type: 'u8' }],\r\n                ['instantSalePrice', { kind: 'option', type: 'u64' }],\r\n                ['name', { kind: 'option', type: [32] }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        WinnerLimit,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['type', 'u8'],\r\n                ['usize', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        StartAuctionArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['resource', 'pubkeyAsString'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        PlaceBidArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['amount', 'u64'],\r\n                ['resource', 'pubkeyAsString'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        CancelBidArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['instruction', 'u8'],\r\n                ['resource', 'pubkeyAsString'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        SetAuthorityArgs,\r\n        {\r\n            kind: 'struct',\r\n            fields: [['instruction', 'u8']],\r\n        },\r\n    ],\r\n    [\r\n        AuctionData,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['authority', 'pubkeyAsString'],\r\n                ['tokenMint', 'pubkeyAsString'],\r\n                ['lastBid', { kind: 'option', type: 'u64' }],\r\n                ['endedAt', { kind: 'option', type: 'u64' }],\r\n                ['endAuctionAt', { kind: 'option', type: 'u64' }],\r\n                ['auctionGap', { kind: 'option', type: 'u64' }],\r\n                ['priceFloor', PriceFloor],\r\n                ['state', 'u8'],\r\n                ['bidState', BidState],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        AuctionDataExtended,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['totalUncancelledBids', 'u64'],\r\n                ['tickSize', { kind: 'option', type: 'u64' }],\r\n                ['gapTickSizePercentage', { kind: 'option', type: 'u8' }],\r\n                ['instantSalePrice', { kind: 'option', type: 'u64' }],\r\n                ['name', { kind: 'option', type: [32] }],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        PriceFloor,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['type', 'u8'],\r\n                ['hash', [32]],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        BidState,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['type', 'u8'],\r\n                ['bids', [Bid]],\r\n                ['max', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        Bid,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['key', 'pubkeyAsString'],\r\n                ['amount', 'u64'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        BidderMetadata,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['bidderPubkey', 'pubkeyAsString'],\r\n                ['auctionPubkey', 'pubkeyAsString'],\r\n                ['lastBid', 'u64'],\r\n                ['lastBidTimestamp', 'u64'],\r\n                ['cancelled', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n    [\r\n        BidderPot,\r\n        {\r\n            kind: 'struct',\r\n            fields: [\r\n                ['bidderPot', 'pubkeyAsString'],\r\n                ['bidderAct', 'pubkeyAsString'],\r\n                ['auctionAct', 'pubkeyAsString'],\r\n                ['emptied', 'u8'],\r\n            ],\r\n        },\r\n    ],\r\n]);\r\nconst decodeAuctionData = (buffer) => {\r\n    return (0, borsh_1.deserializeUnchecked)(exports.AUCTION_SCHEMA, AuctionData, buffer);\r\n};\r\nexports.decodeAuctionData = decodeAuctionData;\r\nasync function createAuction(settings, creator, instructions) {\r\n    const auctionProgramId = (0, programIds_1.programIds)().auction;\r\n    const data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, settings));\r\n    const auctionKey = (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(settings.resource).toBuffer(),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n    const keys = [\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(creator),\r\n            isSigner: true,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(auctionKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(await getAuctionExtended({\r\n                auctionProgramId,\r\n                resource: settings.resource,\r\n            })),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: (0, utils_1.toPublicKey)(auctionProgramId),\r\n        data: data,\r\n    }));\r\n}\r\nexports.createAuction = createAuction;\r\nasync function startAuctionWithResource(resource, creator, instructions) {\r\n    const auctionProgramId = (0, programIds_1.programIds)().auction;\r\n    const data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new StartAuctionArgs({\r\n        resource,\r\n    })));\r\n    const auctionKey = (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(resource).toBuffer(),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n    const keys = [\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(creator),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(auctionKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: (0, utils_1.toPublicKey)(auctionProgramId),\r\n        data: data,\r\n    }));\r\n}\r\nexports.startAuctionWithResource = startAuctionWithResource;\r\nasync function setAuctionAuthority(auction, currentAuthority, newAuthority, instructions) {\r\n    const auctionProgramId = (0, programIds_1.programIds)().auction;\r\n    const data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new SetAuthorityArgs()));\r\n    const keys = [\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(auction),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(currentAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(newAuthority),\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: (0, utils_1.toPublicKey)(auctionProgramId),\r\n        data: data,\r\n    }));\r\n}\r\nexports.setAuctionAuthority = setAuctionAuthority;\r\nasync function placeBid(bidderPubkey, bidderTokenPubkey, bidderPotTokenPubkey, tokenMintPubkey, transferAuthority, payer, resource, amount, instructions) {\r\n    const auctionProgramId = (0, programIds_1.programIds)().auction;\r\n    const data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new PlaceBidArgs({\r\n        resource,\r\n        amount,\r\n    })));\r\n    const auctionKey = (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(resource).toBuffer(),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n    const bidderPotKey = await getBidderPotKey({\r\n        auctionProgramId,\r\n        auctionKey,\r\n        bidderPubkey,\r\n    });\r\n    const bidderMetaKey = (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(auctionKey).toBuffer(),\r\n        (0, utils_1.toPublicKey)(bidderPubkey).toBuffer(),\r\n        Buffer.from('metadata'),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n    let bidderPotTokenAccount;\r\n    if (!bidderPotTokenPubkey) {\r\n        bidderPotTokenAccount = (0, utils_1.toPublicKey)((await (0, utils_1.findProgramAddress)([\r\n            Buffer.from(exports.AUCTION_PREFIX),\r\n            (0, utils_1.toPublicKey)(bidderPotKey).toBuffer(),\r\n            Buffer.from(exports.BIDDER_POT_TOKEN),\r\n        ], (0, utils_1.toPublicKey)(auctionProgramId)))[0]);\r\n    }\r\n    else {\r\n        bidderPotTokenAccount = (0, utils_1.toPublicKey)(bidderPotTokenPubkey);\r\n    }\r\n    const keys = [\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderPubkey),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderTokenPubkey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderPotKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: bidderPotTokenAccount,\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderMetaKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(auctionKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(await getAuctionExtended({ auctionProgramId, resource })),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(tokenMintPubkey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(transferAuthority),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(payer),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: (0, programIds_1.programIds)().token,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: (0, utils_1.toPublicKey)(auctionProgramId),\r\n        data: data,\r\n    }));\r\n    return {\r\n        amount,\r\n    };\r\n}\r\nexports.placeBid = placeBid;\r\nasync function getBidderPotKey({ auctionProgramId, auctionKey, bidderPubkey, }) {\r\n    return (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(auctionKey).toBuffer(),\r\n        (0, utils_1.toPublicKey)(bidderPubkey).toBuffer(),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n}\r\nexports.getBidderPotKey = getBidderPotKey;\r\nasync function getAuctionExtended({ auctionProgramId, resource, }) {\r\n    return (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(resource).toBuffer(),\r\n        Buffer.from(exports.EXTENDED),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n}\r\nexports.getAuctionExtended = getAuctionExtended;\r\nasync function cancelBid(bidderPubkey, bidderTokenPubkey, bidderPotTokenPubkey, tokenMintPubkey, resource, instructions) {\r\n    const auctionProgramId = (0, programIds_1.programIds)().auction;\r\n    const data = Buffer.from((0, borsh_1.serialize)(exports.AUCTION_SCHEMA, new CancelBidArgs({\r\n        resource,\r\n    })));\r\n    const auctionKey = (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(resource).toBuffer(),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n    const bidderPotKey = await getBidderPotKey({\r\n        auctionProgramId,\r\n        auctionKey,\r\n        bidderPubkey,\r\n    });\r\n    const bidderMetaKey = (await (0, utils_1.findProgramAddress)([\r\n        Buffer.from(exports.AUCTION_PREFIX),\r\n        (0, utils_1.toPublicKey)(auctionProgramId).toBuffer(),\r\n        (0, utils_1.toPublicKey)(auctionKey).toBuffer(),\r\n        (0, utils_1.toPublicKey)(bidderPubkey).toBuffer(),\r\n        Buffer.from('metadata'),\r\n    ], (0, utils_1.toPublicKey)(auctionProgramId)))[0];\r\n    const keys = [\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderPubkey),\r\n            isSigner: true,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderTokenPubkey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderPotKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderPotTokenPubkey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(bidderMetaKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(auctionKey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(await getAuctionExtended({ auctionProgramId, resource })),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: (0, utils_1.toPublicKey)(tokenMintPubkey),\r\n            isSigner: false,\r\n            isWritable: true,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_CLOCK_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SYSVAR_RENT_PUBKEY,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: web3_js_1.SystemProgram.programId,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n        {\r\n            pubkey: (0, programIds_1.programIds)().token,\r\n            isSigner: false,\r\n            isWritable: false,\r\n        },\r\n    ];\r\n    instructions.push(new web3_js_1.TransactionInstruction({\r\n        keys,\r\n        programId: (0, utils_1.toPublicKey)(auctionProgramId),\r\n        data: data,\r\n    }));\r\n}\r\nexports.cancelBid = cancelBid;\r\n//# sourceMappingURL=auction.js.map"]},"metadata":{},"sourceType":"script"}